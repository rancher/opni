Running Suite: Alerting Suite - /home/ec2-user/opni/test/plugins/alerting
=========================================================================
Random Seed: [1m1692063585[0m

Will run [1m40[0m of [1m41[0m specs
[38;5;243m------------------------------[0m
[0m[1m[BeforeSuite] [0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_suite_test.go:46[0m
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Starting test environment
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Copying 7 files from embedded testdata/cortex to /tmp/opni-test-2132242568/cortex
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Waiting for jetstream to start...
  [231479] 2023/08/15 01:39:55.563722 [INF] Starting nats-server
  [231479] 2023/08/15 01:39:55.563769 [INF]   Version:  2.9.21
  [231479] 2023/08/15 01:39:55.563772 [INF]   Git:      [b2e7725]
  [231479] 2023/08/15 01:39:55.563798 [INF]   Name:     NDB2A7RMGWYYYSG3TTANYY53LKD2LU7AGFTQ7AIYHAYGKNAHXFE3EGX7
  [231479] 2023/08/15 01:39:55.563806 [INF]   Node:     B5UBIPgv
  [231479] 2023/08/15 01:39:55.563808 [INF]   ID:       NDB2A7RMGWYYYSG3TTANYY53LKD2LU7AGFTQ7AIYHAYGKNAHXFE3EGX7
  [231479] 2023/08/15 01:39:55.563817 [INF] Using configuration file: /tmp/opni-test-2132242568/jetstream/jetstream.conf
  [231479] 2023/08/15 01:39:55.564279 [INF] Starting JetStream
  [231479] 2023/08/15 01:39:55.564540 [INF]     _ ___ _____ ___ _____ ___ ___   _   __  __
  [231479] 2023/08/15 01:39:55.564554 [INF]  _ | | __|_   _/ __|_   _| _ \ __| /_\ |  \/  |
  [231479] 2023/08/15 01:39:55.564557 [INF] | || | _|  | | \__ \ | | |   / _| / _ \| |\/| |
  [231479] 2023/08/15 01:39:55.564560 [INF]  \__/|___| |_| |___/ |_| |_|_\___/_/ \_\_|  |_|
  [231479] 2023/08/15 01:39:55.564563 [INF] 
  [231479] 2023/08/15 01:39:55.564566 [INF]          https://docs.nats.io/jetstream
  [231479] 2023/08/15 01:39:55.564569 [INF] 
  [231479] 2023/08/15 01:39:55.564572 [INF] ---------------- JETSTREAM ----------------
  [231479] 2023/08/15 01:39:55.564578 [INF]   Max Memory:      11.71 GB
  [231479] 2023/08/15 01:39:55.564582 [INF]   Max Storage:     5.29 GB
  [231479] 2023/08/15 01:39:55.564585 [INF]   Store Directory: "/tmp/opni-test-2132242568/jetstream/data/jetstream"
  [231479] 2023/08/15 01:39:55.564589 [INF] -------------------------------------------
  [231479] 2023/08/15 01:39:55.565067 [INF] Listening for client connections on 0.0.0.0:35793
  [231479] 2023/08/15 01:39:55.565669 [INF] Server is ready
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Jetstream started
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-2132242568/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway[39m found 0 plugins
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway[39m loaded plugin manifest {"plugins": 0}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.cache[39m compressing and archiving plugins...
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.cache[39m added 0 new plugins to cache
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m running plugin cache gc
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "binary"
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "kubernetes"
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "noop"
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "control.HealthListener"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering internal service {"service": "stream.Delegate"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "core.Pinger"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Loading gateway plugins...
  2023-08-15T01:39:55Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.backends.Capability", "opni.Metrics"]}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.Metrics", "opni.backends.Capability", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.System"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.System"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/trace", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/profile", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/block", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/heap", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/ready", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/healthy", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m internal gateway stream connected
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexadmin.CortexAdmin
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/metrics", "capability": "metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/alerting", "capability": "alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_alerting"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertConditions
  2023-08-15T01:39:55Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m calling client handler
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexadmin.CortexAdmin"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/AllUserStats"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/WriteMetrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/Query"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/QueryRange"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetRule"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricMetadata"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ListRules"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/LoadRules"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/DeleteRule"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/FlushBlocks"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetSeriesMetrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricLabelSets"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexConfig"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ExtractRawSeries"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexadmin.CortexAdmin", "rules": 17}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m plugin rejected internal stream connection {"plugin": "plugin_alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexadmin.CortexAdmin", "rules": [{"http":{"Pattern":{"Get":"/all_user_stats"}},"method":{"name":"AllUserStats","input_type":".google.protobuf.Empty","output_type":".cortexadmin.UserIDStatsList","options":{}}},{"http":{"Pattern":{"Post":"/write_metrics"},"body":"*"},"method":{"name":"WriteMetrics","input_type":".cortexadmin.WriteRequest","output_type":".cortexadmin.WriteResponse","options":{}}},{"http":{"Pattern":{"Get":"/query"},"additional_bindings":[{"Pattern":{"Post":"/query"},"body":"*"}]},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query"},"body":"*"},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/query_range"},"additional_bindings":[{"Pattern":{"Post":"/query_range"},"body":"*"}]},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query_range"},"body":"*"},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/rules/{namespace}/{groupName}"}},"method":{"name":"GetRule","input_type":".cortexadmin.GetRuleRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/metadata"}},"method":{"name":"GetMetricMetadata","input_type":".cortexadmin.MetricMetadataRequest","output_type":".cortexadmin.MetricMetadata","options":{}}},{"http":{"Pattern":{"Get":"/rules"}},"method":{"name":"ListRules","input_type":".cortexadmin.ListRulesRequest","output_type":".cortexadmin.ListRulesResponse","options":{}}},{"http":{"Pattern":{"Post":"/rules"}},"method":{"name":"LoadRules","input_type":".cortexadmin.LoadRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/rules/{groupName}"}},"method":{"name":"DeleteRule","input_type":".cortexadmin.DeleteRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/flush_blocks"}},"method":{"name":"FlushBlocks","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/series/metadata"}},"method":{"name":"GetSeriesMetrics","input_type":".cortexadmin.SeriesRequest","output_type":".cortexadmin.SeriesInfoList","options":{}}},{"http":{"Pattern":{"Get":"/series/labels"}},"method":{"name":"GetMetricLabelSets","input_type":".cortexadmin.LabelRequest","output_type":".cortexadmin.MetricLabels","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetCortexStatus","input_type":".google.protobuf.Empty","output_type":".cortexadmin.CortexStatus","options":{}}},{"http":{"Pattern":{"Get":"/config"}},"method":{"name":"GetCortexConfig","input_type":".cortexadmin.ConfigRequest","output_type":".cortexadmin.ConfigResponse","options":{}}},{"http":{"Pattern":{"Get":"/series/raw"}},"method":{"name":"ExtractRawSeries","input_type":".cortexadmin.MatcherRequest","output_type":".cortexadmin.QueryResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexops.CortexOps
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.metrics.cortex-http[39m configuring http api server
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexops.CortexOps"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/ConfigureCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/UninstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexops.CortexOps", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexops.CortexOps", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".cortexops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".cortexops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".cortexops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service remoteread.RemoteReadGateway
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.alerting[39m using cluster driver {"driver": "test-environment"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /ready", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.opni.alerting[39m starting opni embedded server {"addr": "127.0.0.1:43869"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "remoteread.RemoteReadGateway"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/AddTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/EditTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/RemoveTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/ListTargets"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Start"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Stop"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/GetTargetStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Discover"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertConditions"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionGroups"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CreateAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/GetAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditions"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/UpdateAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionChoices"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeleteAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "remoteread.RemoteReadGateway", "rules": 8}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/AlertConditionStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionsWithStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CloneTo"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ActivateSilence"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeactivateSilence"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/Timeline"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "remoteread.RemoteReadGateway", "rules": [{"http":{"Pattern":{"Post":"/targets"},"body":"*"},"method":{"name":"AddTarget","input_type":".remoteread.TargetAddRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Put":"/targets"},"body":"*"},"method":{"name":"EditTarget","input_type":".remoteread.TargetEditRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/targets/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"RemoveTarget","input_type":".remoteread.TargetRemoveRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/targets"}},"method":{"name":"ListTargets","input_type":".remoteread.TargetListRequest","output_type":".remoteread.TargetList","options":{}}},{"http":{"Pattern":{"Post":"/targets/start/{target.meta.clusterId}/{target.meta.name}"},"body":"*"},"method":{"name":"Start","input_type":".remoteread.StartReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/targets/stop/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"Stop","input_type":".remoteread.StopReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status"},"body":"*"},"method":{"name":"GetTargetStatus","input_type":".remoteread.TargetStatusRequest","output_type":".remoteread.TargetStatus","options":{}}},{"http":{"Pattern":{"Post":"/edit"},"body":"*"},"method":{"name":"Discover","input_type":".remoteread.DiscoveryRequest","output_type":".remoteread.DiscoveryResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertConditions", "rules": 13}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service node.metrics.NodeConfiguration
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertConditions", "rules": [{"http":{"Pattern":{"Get":"/groups"}},"method":{"name":"ListAlertConditionGroups","input_type":".google.protobuf.Empty","output_type":".core.ReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertCondition","input_type":".alerting.AlertCondition","output_type":".alerting.ConditionReference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertCondition","input_type":".alerting.ConditionReference","output_type":".alerting.AlertCondition","options":{}}},{"http":{"Pattern":{"Post":"/list"},"body":"*"},"method":{"name":"ListAlertConditions","input_type":".alerting.ListAlertConditionRequest","output_type":".alerting.AlertConditionList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertCondition","input_type":".alerting.UpdateAlertConditionRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/choices"}},"method":{"name":"ListAlertConditionChoices","input_type":".alerting.AlertDetailChoicesRequest","output_type":".alerting.ListAlertTypeDetails","options":{}}},{"http":{"Pattern":{"Delete":"/configure"}},"method":{"name":"DeleteAlertCondition","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status/{id}"}},"method":{"name":"AlertConditionStatus","input_type":".alerting.ConditionReference","output_type":".alerting.AlertStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/list/withStatus"},"body":"*"},"method":{"name":"ListAlertConditionsWithStatus","input_type":".alerting.ListStatusRequest","output_type":".alerting.ListStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/clone"},"body":"*"},"method":{"name":"CloneTo","input_type":".alerting.CloneToRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/silences"},"body":"*"},"method":{"name":"ActivateSilence","input_type":".alerting.SilenceRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/silences"}},"method":{"name":"DeactivateSilence","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/timeline"}},"method":{"name":"Timeline","input_type":".alerting.TimelineRequest","output_type":".alerting.TimelineResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertEndpoints
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertEndpoints"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/CreateAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/GetAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ToggleNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ListAlertEndpoints"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/UpdateAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/DeleteAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/TestAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertEndpoints", "rules": 7}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertEndpoints", "rules": [{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertEndpoint","input_type":".alerting.AlertEndpoint","output_type":".core.Reference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertEndpoint","input_type":".core.Reference","output_type":".alerting.AlertEndpoint","options":{}}},{"http":{"Pattern":{"Post":"/toggleNotifications"},"body":"*"},"method":{"name":"ToggleNotifications","input_type":".alerting.ToggleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/list"}},"method":{"name":"ListAlertEndpoints","input_type":".alerting.ListAlertEndpointsRequest","output_type":".alerting.AlertEndpointList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertEndpoint","input_type":".alerting.UpdateAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/delete"},"body":"*"},"method":{"name":"DeleteAlertEndpoint","input_type":".alerting.DeleteAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/test"},"body":"*"},"method":{"name":"TestAlertEndpoint","input_type":".alerting.TestAlertEndpointRequest","output_type":".alerting.TestAlertEndpointResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertNotifications
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/TriggerAlerts"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ResolveAlerts"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/PushNotification"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListAlarmMessages"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListRoutingRelationships"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertNotifications", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertNotifications", "rules": [{"http":{"Pattern":{"Post":"/trigger"},"body":"*"},"method":{"name":"TriggerAlerts","input_type":".alerting.TriggerAlertsRequest","output_type":".alerting.TriggerAlertsResponse","options":{}}},{"http":{"Pattern":{"Post":"/push"},"body":"*"},"method":{"name":"PushNotification","input_type":".alerting.Notification","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/notifications/list"},"body":"*"},"method":{"name":"ListNotifications","input_type":".alerting.ListNotificationRequest","output_type":".alerting.ListMessageResponse","options":{}}},{"http":{"Pattern":{"Post":"/alarms/list"},"body":"*"},"method":{"name":"ListAlarmMessages","input_type":".alerting.ListAlarmMessageRequest","output_type":".alerting.ListMessageResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.AlertingAdmin
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "node.metrics.NodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "node.metrics.NodeConfiguration", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "node.metrics.NodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".node.metrics.MetricsCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".node.metrics.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.AlertingAdmin"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/ConfigureCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/InstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/UninstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/Info"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.ops.AlertingAdmin", "rules": 6}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.ops.AlertingAdmin", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".alerting.ops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".alerting.ops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/install"}},"method":{"name":"InstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".alerting.ops.UninstallRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/info"}},"method":{"name":"Info","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ComponentInfo","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.ConfigReconciler
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.ConfigReconciler/SyncConfig"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m service has no http rules {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.AlertingNodeConfiguration
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.AlertingNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.AlertingNodeConfiguration", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.AlertingNodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".alerting.node.AlertingCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".alerting.node.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.NodeAlertingCapability
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.NodeAlertingCapability"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.NodeAlertingCapability/Sync"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.NodeAlertingCapability", "rules": 1}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.NodeAlertingCapability", "rules": [{"http":{"Pattern":{"Post":"/v1/node/sync"},"body":"*"},"method":{"name":"Sync","input_type":".alerting.node.AlertingCapabilityConfig","output_type":".alerting.node.SyncResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Waiting for gateway to start...
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m loaded 12 plugins
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m management HTTP server starting {"address": "localhost:39189"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m management gRPC server starting {"address": "127.0.0.1:42179"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.grpc[39m gateway gRPC server starting {"address": "127.0.0.1:46029"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.http[39m gateway HTTP server starting {"api": "127.0.0.1:37611", "metrics": "127.0.0.1:39213"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/tokens"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/tokens/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/watch"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/clusters/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/certs"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}/health"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/health/watch"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/clusters/{cluster.id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/roles/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/subjectaccess"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/apiextensions"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/capabilities"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/capabilities/{name}/installer"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/install"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/cancel"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/dashboard/settings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/dashboard/settings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/all_user_stats"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/write_metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules/{namespace}/{groupName}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/metadata"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/rules"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/CortexAdmin/rules/{groupName}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/flush_blocks"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/metadata"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Gateway started
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/labels"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/status"}
[38;5;10m[BeforeSuite] PASSED [0.234 seconds][0m
[38;5;243m------------------------------[0m
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/raw"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/configuration"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/RemoteReadGateway/targets"}
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould install the alerting cluster[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:37[0m
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/RemoteReadGateway/targets/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Starting test environment
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/start/{target.meta.clusterId}/{target.meta.name}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/stop/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/edit"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertConditions/groups"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/choices"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/status/{id}"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Copying 7 files from embedded testdata/cortex to /tmp/opni-test-278561545/cortex
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/withStatus"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/clone"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/silences"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/silences"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/timeline"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/list/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/toggleNotifications"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertEndpoints/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/delete"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/test"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/trigger"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/push"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/notifications/list"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Waiting for jetstream to start...
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/alarms/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/configuration"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/install"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/info"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/NodeAlertingCapability/v1/node/sync"}
  [231489] 2023/08/15 01:39:55.799753 [INF] Starting nats-server
  [231489] 2023/08/15 01:39:55.799817 [INF]   Version:  2.9.21
  [231489] 2023/08/15 01:39:55.799822 [INF]   Git:      [b2e7725]
  [231489] 2023/08/15 01:39:55.799834 [INF]   Name:     NDOMIA7P3BPCZ4AKM2VQ4E5SHQIQG7KFFF7UJKGLLKOMSPOHHVF362XI
  [231489] 2023/08/15 01:39:55.799840 [INF]   Node:     3KjorgZ4
  [231489] 2023/08/15 01:39:55.799843 [INF]   ID:       NDOMIA7P3BPCZ4AKM2VQ4E5SHQIQG7KFFF7UJKGLLKOMSPOHHVF362XI
  [231489] 2023/08/15 01:39:55.799862 [INF] Using configuration file: /tmp/opni-test-278561545/jetstream/jetstream.conf
  [231489] 2023/08/15 01:39:55.800154 [INF] Starting JetStream
  [231489] 2023/08/15 01:39:55.800348 [INF]     _ ___ _____ ___ _____ ___ ___   _   __  __
  [231489] 2023/08/15 01:39:55.800366 [INF]  _ | | __|_   _/ __|_   _| _ \ __| /_\ |  \/  |
  [231489] 2023/08/15 01:39:55.800370 [INF] | || | _|  | | \__ \ | | |   / _| / _ \| |\/| |
  [231489] 2023/08/15 01:39:55.800372 [INF]  \__/|___| |_| |___/ |_| |_|_\___/_/ \_\_|  |_|
  [231489] 2023/08/15 01:39:55.800376 [INF] 
  [231489] 2023/08/15 01:39:55.800380 [INF]          https://docs.nats.io/jetstream
  [231489] 2023/08/15 01:39:55.800382 [INF] 
  [231489] 2023/08/15 01:39:55.800392 [INF] ---------------- JETSTREAM ----------------
  [231489] 2023/08/15 01:39:55.800399 [INF]   Max Memory:      11.71 GB
  [231489] 2023/08/15 01:39:55.800410 [INF]   Max Storage:     5.29 GB
  [231489] 2023/08/15 01:39:55.800419 [INF]   Store Directory: "/tmp/opni-test-278561545/jetstream/data/jetstream"
  [231489] 2023/08/15 01:39:55.800430 [INF] -------------------------------------------
  [231489] 2023/08/15 01:39:55.800894 [INF] Listening for client connections on 0.0.0.0:32947
  [231489] 2023/08/15 01:39:55.801237 [INF] Server is ready
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Jetstream started
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-278561545/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway[39m found 0 plugins
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway[39m loaded plugin manifest {"plugins": 0}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.cache[39m compressing and archiving plugins...
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.cache[39m added 0 new plugins to cache
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m running plugin cache gc
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "binary"
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "kubernetes"
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "noop"
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "control.HealthListener"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering internal service {"service": "stream.Delegate"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "core.Pinger"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Loading gateway plugins...
  2023-08-15T01:39:55Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.Metrics", "opni.backends.Capability", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.Metrics", "opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.backends.Capability"]}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.System"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.System"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m internal gateway stream connected
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertConditions
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/trace", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/profile", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/block", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/heap", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/ready", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/healthy", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/alerting", "capability": "alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_alerting"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.grpc[39m plugin rejected internal stream connection {"plugin": "plugin_alerting"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexadmin.CortexAdmin
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m calling client handler
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/metrics", "capability": "metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertConditions"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionGroups"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CreateAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/GetAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditions"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/UpdateAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionChoices"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeleteAlertCondition"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/AlertConditionStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionsWithStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CloneTo"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ActivateSilence"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeactivateSilence"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/Timeline"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertConditions", "rules": 13}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertConditions", "rules": [{"http":{"Pattern":{"Get":"/groups"}},"method":{"name":"ListAlertConditionGroups","input_type":".google.protobuf.Empty","output_type":".core.ReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertCondition","input_type":".alerting.AlertCondition","output_type":".alerting.ConditionReference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertCondition","input_type":".alerting.ConditionReference","output_type":".alerting.AlertCondition","options":{}}},{"http":{"Pattern":{"Post":"/list"},"body":"*"},"method":{"name":"ListAlertConditions","input_type":".alerting.ListAlertConditionRequest","output_type":".alerting.AlertConditionList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertCondition","input_type":".alerting.UpdateAlertConditionRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/choices"}},"method":{"name":"ListAlertConditionChoices","input_type":".alerting.AlertDetailChoicesRequest","output_type":".alerting.ListAlertTypeDetails","options":{}}},{"http":{"Pattern":{"Delete":"/configure"}},"method":{"name":"DeleteAlertCondition","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status/{id}"}},"method":{"name":"AlertConditionStatus","input_type":".alerting.ConditionReference","output_type":".alerting.AlertStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/list/withStatus"},"body":"*"},"method":{"name":"ListAlertConditionsWithStatus","input_type":".alerting.ListStatusRequest","output_type":".alerting.ListStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/clone"},"body":"*"},"method":{"name":"CloneTo","input_type":".alerting.CloneToRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/silences"},"body":"*"},"method":{"name":"ActivateSilence","input_type":".alerting.SilenceRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/silences"}},"method":{"name":"DeactivateSilence","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/timeline"}},"method":{"name":"Timeline","input_type":".alerting.TimelineRequest","output_type":".alerting.TimelineResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertEndpoints
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertEndpoints"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/CreateAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/GetAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ToggleNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ListAlertEndpoints"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/UpdateAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/DeleteAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/TestAlertEndpoint"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertEndpoints", "rules": 7}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertEndpoints", "rules": [{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertEndpoint","input_type":".alerting.AlertEndpoint","output_type":".core.Reference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertEndpoint","input_type":".core.Reference","output_type":".alerting.AlertEndpoint","options":{}}},{"http":{"Pattern":{"Post":"/toggleNotifications"},"body":"*"},"method":{"name":"ToggleNotifications","input_type":".alerting.ToggleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/list"}},"method":{"name":"ListAlertEndpoints","input_type":".alerting.ListAlertEndpointsRequest","output_type":".alerting.AlertEndpointList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertEndpoint","input_type":".alerting.UpdateAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/delete"},"body":"*"},"method":{"name":"DeleteAlertEndpoint","input_type":".alerting.DeleteAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/test"},"body":"*"},"method":{"name":"TestAlertEndpoint","input_type":".alerting.TestAlertEndpointRequest","output_type":".alerting.TestAlertEndpointResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertNotifications
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/TriggerAlerts"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ResolveAlerts"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/PushNotification"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListNotifications"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListAlarmMessages"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListRoutingRelationships"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertNotifications", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertNotifications", "rules": [{"http":{"Pattern":{"Post":"/trigger"},"body":"*"},"method":{"name":"TriggerAlerts","input_type":".alerting.TriggerAlertsRequest","output_type":".alerting.TriggerAlertsResponse","options":{}}},{"http":{"Pattern":{"Post":"/push"},"body":"*"},"method":{"name":"PushNotification","input_type":".alerting.Notification","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/notifications/list"},"body":"*"},"method":{"name":"ListNotifications","input_type":".alerting.ListNotificationRequest","output_type":".alerting.ListMessageResponse","options":{}}},{"http":{"Pattern":{"Post":"/alarms/list"},"body":"*"},"method":{"name":"ListAlarmMessages","input_type":".alerting.ListAlarmMessageRequest","output_type":".alerting.ListMessageResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.AlertingAdmin
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexadmin.CortexAdmin"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/AllUserStats"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/WriteMetrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/Query"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/QueryRange"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetRule"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricMetadata"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ListRules"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/LoadRules"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/DeleteRule"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/FlushBlocks"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetSeriesMetrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricLabelSets"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexConfig"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ExtractRawSeries"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexadmin.CortexAdmin", "rules": 17}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexadmin.CortexAdmin", "rules": [{"http":{"Pattern":{"Get":"/all_user_stats"}},"method":{"name":"AllUserStats","input_type":".google.protobuf.Empty","output_type":".cortexadmin.UserIDStatsList","options":{}}},{"http":{"Pattern":{"Post":"/write_metrics"},"body":"*"},"method":{"name":"WriteMetrics","input_type":".cortexadmin.WriteRequest","output_type":".cortexadmin.WriteResponse","options":{}}},{"http":{"Pattern":{"Get":"/query"},"additional_bindings":[{"Pattern":{"Post":"/query"},"body":"*"}]},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query"},"body":"*"},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/query_range"},"additional_bindings":[{"Pattern":{"Post":"/query_range"},"body":"*"}]},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query_range"},"body":"*"},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/rules/{namespace}/{groupName}"}},"method":{"name":"GetRule","input_type":".cortexadmin.GetRuleRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/metadata"}},"method":{"name":"GetMetricMetadata","input_type":".cortexadmin.MetricMetadataRequest","output_type":".cortexadmin.MetricMetadata","options":{}}},{"http":{"Pattern":{"Get":"/rules"}},"method":{"name":"ListRules","input_type":".cortexadmin.ListRulesRequest","output_type":".cortexadmin.ListRulesResponse","options":{}}},{"http":{"Pattern":{"Post":"/rules"}},"method":{"name":"LoadRules","input_type":".cortexadmin.LoadRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/rules/{groupName}"}},"method":{"name":"DeleteRule","input_type":".cortexadmin.DeleteRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/flush_blocks"}},"method":{"name":"FlushBlocks","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/series/metadata"}},"method":{"name":"GetSeriesMetrics","input_type":".cortexadmin.SeriesRequest","output_type":".cortexadmin.SeriesInfoList","options":{}}},{"http":{"Pattern":{"Get":"/series/labels"}},"method":{"name":"GetMetricLabelSets","input_type":".cortexadmin.LabelRequest","output_type":".cortexadmin.MetricLabels","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetCortexStatus","input_type":".google.protobuf.Empty","output_type":".cortexadmin.CortexStatus","options":{}}},{"http":{"Pattern":{"Get":"/config"}},"method":{"name":"GetCortexConfig","input_type":".cortexadmin.ConfigRequest","output_type":".cortexadmin.ConfigResponse","options":{}}},{"http":{"Pattern":{"Get":"/series/raw"}},"method":{"name":"ExtractRawSeries","input_type":".cortexadmin.MatcherRequest","output_type":".cortexadmin.QueryResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexops.CortexOps
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.AlertingAdmin"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/ConfigureCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/InstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/UninstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/Info"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.ops.AlertingAdmin", "rules": 6}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.ops.AlertingAdmin", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".alerting.ops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".alerting.ops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/install"}},"method":{"name":"InstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".alerting.ops.UninstallRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/info"}},"method":{"name":"Info","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ComponentInfo","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.ConfigReconciler
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.ConfigReconciler/SyncConfig"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m service has no http rules {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.alerting[39m using cluster driver {"driver": "test-environment"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.AlertingNodeConfiguration
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.AlertingNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.AlertingNodeConfiguration", "rules": 4}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.opni.alerting[39m starting opni embedded server {"addr": "127.0.0.1:35689"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.AlertingNodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".alerting.node.AlertingCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".alerting.node.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.NodeAlertingCapability
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.NodeAlertingCapability"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.NodeAlertingCapability/Sync"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.NodeAlertingCapability", "rules": 1}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.NodeAlertingCapability", "rules": [{"http":{"Pattern":{"Post":"/v1/node/sync"},"body":"*"},"method":{"name":"Sync","input_type":".alerting.node.AlertingCapabilityConfig","output_type":".alerting.node.SyncResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.metrics.cortex-http[39m configuring http api server
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexops.CortexOps"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/ConfigureCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/UninstallCluster"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexops.CortexOps", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexops.CortexOps", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".cortexops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".cortexops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".cortexops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service remoteread.RemoteReadGateway
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /ready", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "remoteread.RemoteReadGateway"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/AddTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/EditTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/RemoveTarget"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/ListTargets"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Start"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Stop"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/GetTargetStatus"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Discover"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "remoteread.RemoteReadGateway", "rules": 8}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "remoteread.RemoteReadGateway", "rules": [{"http":{"Pattern":{"Post":"/targets"},"body":"*"},"method":{"name":"AddTarget","input_type":".remoteread.TargetAddRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Put":"/targets"},"body":"*"},"method":{"name":"EditTarget","input_type":".remoteread.TargetEditRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/targets/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"RemoveTarget","input_type":".remoteread.TargetRemoveRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/targets"}},"method":{"name":"ListTargets","input_type":".remoteread.TargetListRequest","output_type":".remoteread.TargetList","options":{}}},{"http":{"Pattern":{"Post":"/targets/start/{target.meta.clusterId}/{target.meta.name}"},"body":"*"},"method":{"name":"Start","input_type":".remoteread.StartReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/targets/stop/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"Stop","input_type":".remoteread.StopReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status"},"body":"*"},"method":{"name":"GetTargetStatus","input_type":".remoteread.TargetStatusRequest","output_type":".remoteread.TargetStatus","options":{}}},{"http":{"Pattern":{"Post":"/edit"},"body":"*"},"method":{"name":"Discover","input_type":".remoteread.DiscoveryRequest","output_type":".remoteread.DiscoveryResponse","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service node.metrics.NodeConfiguration
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading service {"name": "node.metrics.NodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "node.metrics.NodeConfiguration", "rules": 4}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "node.metrics.NodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".node.metrics.MetricsCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".node.metrics.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Waiting for gateway to start...
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m loaded 12 plugins
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.grpc[39m gateway gRPC server starting {"address": "127.0.0.1:38891"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mgateway.http[39m gateway HTTP server starting {"api": "127.0.0.1:43103", "metrics": "127.0.0.1:36995"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m management HTTP server starting {"address": "localhost:34163"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mmgmt[39m management gRPC server starting {"address": "127.0.0.1:46361"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/tokens"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/tokens/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/watch"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/clusters/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/certs"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}/health"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/health/watch"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/clusters/{cluster.id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/roles/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/subjectaccess"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/apiextensions"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/capabilities"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/capabilities/{name}/installer"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/install"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/cancel"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/dashboard/settings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/dashboard/settings"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertConditions/groups"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/choices"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/status/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/withStatus"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/clone"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/silences"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/silences"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/timeline"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/list/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/toggleNotifications"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertEndpoints/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/delete"}
  2023-08-15T01:39:55Z [34mINFO[0m [32mtest.env[39m Gateway started
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/test"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/trigger"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/push"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/notifications/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/alarms/list"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/all_user_stats"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/write_metrics"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules/{namespace}/{groupName}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/metadata"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/rules"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/CortexAdmin/rules/{groupName}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/flush_blocks"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/metadata"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/labels"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/raw"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/configuration"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/install"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml --syncer.listen.address=:45391 --syncer.alertmanager.address=http://127.0.0.1:33771 --syncer.gateway.join.address=:46361 syncer {"config-file": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/info"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml", "alertmanager-port": 33771, "opni-port": 41223}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/NodeAlertingCapability/v1/node/sync"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/configuration"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/configure"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/uninstall"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/RemoteReadGateway/targets/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/start/{target.meta.clusterId}/{target.meta.name}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/stop/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/status"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/edit"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config/{id}"}
  2023-08-15T01:39:55Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config/{node.id}"}
  ts=2023-08-15T01:39:56.082Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:39:56.082Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:39:56.085Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=44749
  ts=2023-08-15T01:39:56.086Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:39:56.116Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml
  ts=2023-08-15T01:39:56.117Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml
  ts=2023-08-15T01:39:56.119Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:33771
  ts=2023-08-15T01:39:56.119Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:33771
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml", "port": 45391}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml", "address": "http://127.0.0.1:33771"}
  2023-08-15T01:39:56Z [34mINFO[0m [36mplugin.alerting[39m updating known peers : [{http://127.0.0.1:33771 http://127.0.0.1:35689}]
[38;5;10m• [1.209 seconds][0m
[38;5;243m------------------------------[0m
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould be able to install the alerting capability on all downstream agents[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:60[0m
  [1mSTEP:[0m bootstrapping agents [38;5;243m@ 08/15/23 01:39:56.998[0m
  2023-08-15T01:39:57Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent1", "address": "127.0.0.1:43003", "version": "v2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent1
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:46361
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity 2322db02-3463-4d35-bdf7-078193fc2f5e
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.apiextensions.HTTPAPIExtension", "opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "4d74f48a-1c76-4e7f-a440-257aa59e8ac1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "447ca987-ca2d-4c53-868b-50730809d173"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:43003"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:39:57Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent2", "address": "127.0.0.1:33707", "version": "v2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  ts=2023-08-15T01:39:57.110Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml
  ts=2023-08-15T01:39:57.111Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-278561545/alertmanager-config-058b2ac2-d73e-46fa-b7f7-58a6e2bec07d/alertmanager.yaml"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent1", "connected": true}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent2
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": true, "conditions": []}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:33707"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway[39m ratelimit: 49.952639 available
  2023-08-15T01:39:57Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent3", "address": "127.0.0.1:40781", "version": "v2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent2"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent2", "connected": true}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent3
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent3 is now active
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent2", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent3 is now active
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "otel"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "otel"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": true, "conditions": []}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:40781"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway[39m ratelimit: 49.942679 available
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["alerting"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent3"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent1", "capability": "alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent2", "capabilities": ["alerting"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent3"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent2", "capability": "alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent3"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m starting rule stream {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m waiting for rule sync client... {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m rule sync client acquired {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m discovered 1 rules {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent3", "capability": "alerting"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m starting rule stream {"component": "rule-streamer", "nodeId": "agent2"}
[38;5;10m• [0.332 seconds][0m
[38;5;243m------------------------------[0m
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m waiting for rule sync client... {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m rule sync client acquired {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m discovered 1 rules {"component": "rule-streamer"}
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould keep track of the downstream synced alerting groups[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:92[0m
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent3"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent3", "connected": true}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent3"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent3", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent3", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent3"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m starting rule stream {"component": "rule-streamer", "nodeId": "agent3"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent3", "ready": true, "conditions": []}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m waiting for rule sync client... {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m rule sync client acquired {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m discovered 1 rules {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent3", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent3"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "otel"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent3", "driver": "otel"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
[38;5;10m• [0.214 seconds][0m
[38;5;243m------------------------------[0m
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould have synced downstream prometheus alerting rules[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:107[0m
[38;5;10m• [0.033 seconds][0m
[38;5;243m------------------------------[0m
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould be able to manipulate a sub-set of the synced rule configuration[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:141[0m
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m Updating alert condition id:"test-rule-16578271-d08c-4b36-b12e-e8026220a9b3" groupId:"test-group-16578271-d08c-4b36-b12e-e8026220a9b3" {"component": "alarms", "handler": "UpdateAlertCondition"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m Updating alert condition id:"test-rule-944f7e8d-6a94-4f4d-92a4-55b77d724d8a" groupId:"test-group-944f7e8d-6a94-4f4d-92a4-55b77d724d8a" {"component": "alarms", "handler": "UpdateAlertCondition"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m Updating alert condition id:"test-rule-eb475fbb-4d41-48d1-8a4c-5ceca3228273" groupId:"test-group-eb475fbb-4d41-48d1-8a4c-5ceca3228273" {"component": "alarms", "handler": "UpdateAlertCondition"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
[38;5;10m• [0.042 seconds][0m
[38;5;243m------------------------------[0m
[0magent capability tests [38;5;243mwhen we use the alerting downstream capability [0m[1mshould be able to uninstall the alerting capability on all downstream agents[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/capability_test.go:186[0m
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["alerting"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent1", "capability": "alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent2", "capabilities": ["alerting"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m stopping rule stream {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m Exiting rule sync loop {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent2", "capability": "alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent3", "capabilities": ["alerting"]}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m stopping rule stream {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m Exiting rule sync loop {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent3", "capability": "alerting"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent3", "time": "2023-08-15T01:39:57Z"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "447ca987-ca2d-4c53-868b-50730809d173"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "4d74f48a-1c76-4e7f-a440-257aa59e8ac1"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m shutting down cluster driver update handler
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m exiting main sync loop
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m condition set {"condition": "Config Sync", "status": "Failure", "reason": "error syncing  alerting node : context canceled"}
  2023-08-15T01:39:57Z [31mERROR[0m [32mtest[39m agent "agent1" exited: context canceled
  2023-08-15T01:39:57Z [35mDEBUG[0m [36mplugin.alerting[39m closing cortex cluster status watcher... {"watcher": "cortex-cluster-status"}
  2023-08-15T01:39:57Z [31mERROR[0m [36mplugin.alerting[39m failed to receive cluster event : rpc error: code = Canceled desc = context canceled
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting[39m failed to send %s node health updatesalerting {"component": "health-cfg-sync", "err": "context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway[39m shutting down plugins
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.alerting[39m Exiting rule sync loop {"component": "rule-streamer"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting[39m failed to receive cluster health status from grpc stream, retrying...
2023-08-15T01:39:57.654Z [33mWARN[0m totem.gateway-server stream.go:231 stream error; kicking {"error": "rpc error: code = Unavailable desc = transport is closing"}
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:39:57.655Z [33mWARN[0m totem.gateway-server server.go:222 stream exited with error {"error": "rpc error: code = Unavailable desc = transport is closing"}
2023-08-15T01:39:57Z [34mINFO[0m [32mgateway[39m all plugins shut down
  2023-08-15T01:39:57Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
2023-08-15T01:39:57.655Z [33mWARN[0m totem.gateway-server.gateway-server->plugin_metrics.gateway-server->plugin_metrics stream.go:231 stream error; kicking {"error": "rpc error: code = Unavailable desc = transport is closing"}
  2023-08-15T01:39:57Z [33mWARN[0m [32mgateway[39m http server exited with error {"error": "context canceled"}
2023-08-15T01:39:57.657Z [33mWARN[0m totem.gateway-server server.go:154 stream exited with error {"error": "rpc error: code = Unavailable desc = transport is closing"}
  2023-08-15T01:39:57Z [31mERROR[0m [32mtest[39m agent "agent3" exited: context canceled
  2023-08-15T01:39:57Z [31mERROR[0m [32mtest[39m agent "agent2" exited: context canceled
  2023-08-15T01:39:57Z [33mWARN[0m [32mtest.env[39m management server exited with error {"error": "context canceled"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent3"}
  2023-08-15T01:39:57Z [33mWARN[0m [32mtest.env[39m gateway server exited with error {"error": "context canceled"}
  2023-08-15T01:39:57Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:39:57Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent3"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
2023-08-15T01:39:57.658Z [33mWARN[0m totem.gateway-server.gateway-server->plugin_alerting.gateway-server->plugin_alerting stream.go:231 stream error; kicking {"error": "rpc error: code = Unavailable desc = transport is closing"}
  ts=2023-08-15T01:39:57.651Z caller=alertmanager_main.go:601 level=info msg="Received SIGTERM, exiting gracefully..."
  ts=2023-08-15T01:39:57.652Z caller=cluster.go:690 level=info component=cluster msg="gossip not settled but continuing anyway" polls=0 elapsed=1.565609031s
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error
  2023-08-15T01:39:57Z [31mERROR[0m [36mplugin.alerting[39m EOF
  2023-08-15T01:39:57Z [31mERROR[0m [36mplugin.alerting[39m failed to get node capability spec {"component": "node-backend", "error": "rpc error: code = Unknown desc = nats: connection closed"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error
  2023-08-15T01:39:57Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
[38;5;10m• [0.044 seconds][0m
[38;5;243m------------------------------[0m
[0mAlerting routing logic translation to physical dispatching [38;5;243mwhen setting namespace specs on the routing tree [0m[1mshould be able to dynamically update alert routing[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/routing_test.go:77[0m
  [1mSTEP:[0m Creating some test webhook servers [38;5;243m@ 08/15/23 01:39:57.667[0m
  [1mSTEP:[0m routing to a subset of the test webhook servers [38;5;243m@ 08/15/23 01:39:57.668[0m
  [1mSTEP:[0m setting the router to the namespace specs [38;5;243m@ 08/15/23 01:39:57.668[0m
  [1mSTEP:[0m running alertmanager with this config [38;5;243m@ 08/15/23 01:39:57.668[0m
  [1mSTEP:[0m expecting to successfully build a config [38;5;243m@ 08/15/23 01:39:57.669[0m
  [1mSTEP:[0m checking that the config passes the marshalling validation [38;5;243m@ 08/15/23 01:39:57.669[0m
  [1mSTEP:[0m checking that the config passes the unmarshalling validation [38;5;243m@ 08/15/23 01:39:57.673[0m
  [1mSTEP:[0m writing the config file to a temporary directory [38;5;243m@ 08/15/23 01:39:57.678[0m
  [1mSTEP:[0m Verifying that the config can be loaded by alertmanager [38;5;243m@ 08/15/23 01:39:57.679[0m
  2023-08-15T01:39:57Z [34mINFO[0m [32mtest.env[39m Waiting for alertmanager to start...
  ts=2023-08-15T01:39:57.778Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:39:57.778Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:39:57.778Z caller=cluster.go:173 level=debug component=cluster msg="resolved peers to following addresses" peers=
  2023-08-15T01:39:57Z [34mINFO[0m [36mplugin.opni.alerting[39m [2mextensions/embedded_server.go:88[22m starting opni embedded server {"addr": ":37795"}
  ts=2023-08-15T01:39:57.782Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=36609
  ts=2023-08-15T01:39:57.782Z caller=delegate.go:236 level=debug component=cluster received=NotifyJoin node=01H7VDK16PBHAH6DXXGH2DBC9M addr=172.31.7.66:36609
  ts=2023-08-15T01:39:57.782Z caller=nflog.go:275 level=debug component=nflog msg="notification log snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/496233c9-b52c-41ec-873b-750058418da5/nflog: no such file or directory"
  ts=2023-08-15T01:39:57.783Z caller=silence.go:353 level=debug component=silences msg="silences snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/496233c9-b52c-41ec-873b-750058418da5/silences: no such file or directory"
  ts=2023-08-15T01:39:57.783Z caller=cluster.go:266 level=debug component=cluster msg="joined cluster" peers=0
  ts=2023-08-15T01:39:57.783Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:39:57.816Z caller=alertmanager_main.go:413 level=debug externalURL=http://ip-172-31-7-66.us-east-2.compute.internal:45495
  ts=2023-08-15T01:39:57.816Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-FFdQc2CufUZM7fS4V7Hxkj
  ts=2023-08-15T01:39:57.817Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-FFdQc2CufUZM7fS4V7Hxkj
  ts=2023-08-15T01:39:57.818Z caller=alertmanager_main.go:543 level=debug routePrefix=/
  ts=2023-08-15T01:39:57.819Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:45495
  ts=2023-08-15T01:39:57.819Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:45495
  2023-08-15T01:39:58Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:39:58Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:39:58Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:39:58Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:39:58Z [34mINFO[0m [32mtest.env[39m AlertManager started {"address": "http://localhost:45495", "opni-address": "http://localhost:824683462744"}
  [1mSTEP:[0m sending alerts to each condition in the router [38;5;243m@ 08/15/23 01:39:58.684[0m
  ts=2023-08-15T01:39:58.685Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[f5800cc][active]
  ts=2023-08-15T01:39:58.686Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[843c13a][active]
  ts=2023-08-15T01:39:58.686Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[b92943f][active]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:39:58.687[0m
  2023-08-15T01:39:59Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:39:59Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:39:59Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:39:59Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:39:59.686Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"0492e20c-7f62-45e6-a1df-458561ea691e\", test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}" msg=flushing alerts=[[f5800cc][active]]
  ts=2023-08-15T01:39:59.686Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:39:59.686Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:39:59.686Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}:{opni_uuid=\"0492e20c-7f62-45e6-a1df-458561ea691e\", test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}" msg=flushing alerts=[[f5800cc][active]]
  ts=2023-08-15T01:39:59.687Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  ts=2023-08-15T01:39:59.687Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:39:59.691[0m
  ts=2023-08-15T01:39:59.784Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.001099747s
  2023-08-15T01:40:00Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:00Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:00Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:00Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:00.694[0m
  2023-08-15T01:40:01Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:01Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:01Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:01Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:01.698[0m
  ts=2023-08-15T01:40:01.785Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=4.002260686s
  2023-08-15T01:40:02Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:02Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:02Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:02Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:02.702[0m
  2023-08-15T01:40:03Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:03Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:03Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:03Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:03.706[0m
  ts=2023-08-15T01:40:03.786Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=6.003212044s
  2023-08-15T01:40:04Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:04Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:04Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:04Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:04.71[0m
  2023-08-15T01:40:05Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:05Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:05Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:05Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:05.714[0m
  ts=2023-08-15T01:40:05.787Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=8.003730932s
  2023-08-15T01:40:06Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:06Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:06Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:06Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:06.718[0m
  2023-08-15T01:40:07Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:07Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:07Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:07Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:07.721[0m
  ts=2023-08-15T01:40:07.788Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.004699276s
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__0492e20c-7f62-45e6-a1df-458561ea691e integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__22e67d2a-f6c0-461e-8a14-ee6be7004cfd integration=webhook[1] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__22e67d2a-f6c0-461e-8a14-ee6be7004cfd integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[2] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.792Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}:{opni_uuid=\"0492e20c-7f62-45e6-a1df-458561ea691e\", test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}" msg=flushing alerts=[[f5800cc][active]]
  ts=2023-08-15T01:40:07.792Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:07.792Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.793Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[1] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:07.793Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  2023-08-15T01:40:08Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:08Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:08Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:08Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:08.725[0m
  [1mSTEP:[0m deleting a random server endpoint [38;5;243m@ 08/15/23 01:40:08.728[0m
  [1mSTEP:[0m expecting to successfully build a config [38;5;243m@ 08/15/23 01:40:08.729[0m
  [1mSTEP:[0m checking that the config passes the marshalling validation [38;5;243m@ 08/15/23 01:40:08.729[0m
  [1mSTEP:[0m checking that the config passes the unmarshalling validation [38;5;243m@ 08/15/23 01:40:08.732[0m
  [1mSTEP:[0m writing the config file to a temporary directory [38;5;243m@ 08/15/23 01:40:08.738[0m
  [1mSTEP:[0m Verifying that the config can be loaded by alertmanager [38;5;243m@ 08/15/23 01:40:08.738[0m
  2023-08-15T01:40:08Z [34mINFO[0m [32mtest.env[39m Waiting for alertmanager to start...
  ts=2023-08-15T01:40:08.836Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:40:08.837Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:40:08.837Z caller=cluster.go:173 level=debug component=cluster msg="resolved peers to following addresses" peers=
  2023-08-15T01:40:08Z [34mINFO[0m [36mplugin.opni.alerting[39m [2mextensions/embedded_server.go:88[22m starting opni embedded server {"addr": ":45149"}
  ts=2023-08-15T01:40:08.839Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=40461
  ts=2023-08-15T01:40:08.840Z caller=delegate.go:236 level=debug component=cluster received=NotifyJoin node=01H7VDKC07RJNFMDS3ZZAGXFFZ addr=172.31.7.66:40461
  ts=2023-08-15T01:40:08.840Z caller=nflog.go:275 level=debug component=nflog msg="notification log snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/a450ba5c-4085-4ee7-98c2-15fca48f4d02/nflog: no such file or directory"
  ts=2023-08-15T01:40:08.840Z caller=silence.go:353 level=debug component=silences msg="silences snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/a450ba5c-4085-4ee7-98c2-15fca48f4d02/silences: no such file or directory"
  ts=2023-08-15T01:40:08.840Z caller=cluster.go:266 level=debug component=cluster msg="joined cluster" peers=0
  ts=2023-08-15T01:40:08.840Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:40:08.872Z caller=alertmanager_main.go:413 level=debug externalURL=http://ip-172-31-7-66.us-east-2.compute.internal:43743
  ts=2023-08-15T01:40:08.873Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-qVtPRf6oS9VNSia69hynjA
  ts=2023-08-15T01:40:08.873Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-qVtPRf6oS9VNSia69hynjA
  ts=2023-08-15T01:40:08.875Z caller=alertmanager_main.go:543 level=debug routePrefix=/
  ts=2023-08-15T01:40:08.876Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:43743
  ts=2023-08-15T01:40:08.876Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:43743
  2023-08-15T01:40:09Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:09Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:09Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:09Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:09Z [34mINFO[0m [32mtest.env[39m AlertManager started {"address": "http://localhost:43743", "opni-address": "http://localhost:824688928536"}
  [1mSTEP:[0m sending alerts to each condition in the router [38;5;243m@ 08/15/23 01:40:09.742[0m
  ts=2023-08-15T01:40:09.743Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[f5800cc][active]
  ts=2023-08-15T01:40:09.744Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[843c13a][active]
  ts=2023-08-15T01:40:09.745Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[b92943f][active]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:09.745[0m
  2023-08-15T01:40:10Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:10Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:10Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:10Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:10.744Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"0492e20c-7f62-45e6-a1df-458561ea691e\", test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}" msg=flushing alerts=[[f5800cc][active]]
  ts=2023-08-15T01:40:10.745Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:10.745Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:10.745Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  ts=2023-08-15T01:40:10.745Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:10.748[0m
  ts=2023-08-15T01:40:10.841Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.000716812s
  2023-08-15T01:40:11Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:11Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:11Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:11Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:11.752[0m
  2023-08-15T01:40:12Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:12Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:12Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:12Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:12.756[0m
  ts=2023-08-15T01:40:12.842Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=4.001435371s
  2023-08-15T01:40:13Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:13Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:13Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:13Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:13.759[0m
  2023-08-15T01:40:14Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:14Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:14Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:14Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:14.762[0m
  ts=2023-08-15T01:40:14.843Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=6.002066983s
  2023-08-15T01:40:15Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:15Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:15Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:15Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:15.766[0m
  2023-08-15T01:40:16Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:16Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:16Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:16Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:16.77[0m
  ts=2023-08-15T01:40:16.843Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=8.00277936s
  2023-08-15T01:40:17Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:17Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:17Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:17Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:17.774[0m
  2023-08-15T01:40:18Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:18Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:18Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:18Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:18.778[0m
  ts=2023-08-15T01:40:18.844Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.003654663s
  ts=2023-08-15T01:40:18.846Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.847Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[1] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.847Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.847Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__22e67d2a-f6c0-461e-8a14-ee6be7004cfd integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.848Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:18.848Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.848Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:18.848Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  2023-08-15T01:40:19Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:19Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:19Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:19Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:19.781[0m
  [1mSTEP:[0m updating an endpoint to another endpoint [38;5;243m@ 08/15/23 01:40:19.784[0m
  [1mSTEP:[0m send an an alert to each specs [38;5;243m@ 08/15/23 01:40:19.785[0m
  [1mSTEP:[0m expecting to successfully build a config [38;5;243m@ 08/15/23 01:40:19.785[0m
  [1mSTEP:[0m checking that the config passes the marshalling validation [38;5;243m@ 08/15/23 01:40:19.785[0m
  [1mSTEP:[0m checking that the config passes the unmarshalling validation [38;5;243m@ 08/15/23 01:40:19.789[0m
  [1mSTEP:[0m writing the config file to a temporary directory [38;5;243m@ 08/15/23 01:40:19.795[0m
  [1mSTEP:[0m Verifying that the config can be loaded by alertmanager [38;5;243m@ 08/15/23 01:40:19.795[0m
  2023-08-15T01:40:19Z [34mINFO[0m [32mtest.env[39m Waiting for alertmanager to start...
  ts=2023-08-15T01:40:19.895Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:40:19.895Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  2023-08-15T01:40:19Z [34mINFO[0m [36mplugin.opni.alerting[39m [2mextensions/embedded_server.go:88[22m starting opni embedded server {"addr": ":45231"}
  ts=2023-08-15T01:40:19.896Z caller=cluster.go:173 level=debug component=cluster msg="resolved peers to following addresses" peers=
  ts=2023-08-15T01:40:19.898Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=37031
  ts=2023-08-15T01:40:19.899Z caller=delegate.go:236 level=debug component=cluster received=NotifyJoin node=01H7VDKPSTYQSVV8XAX0H1RNMS addr=172.31.7.66:37031
  ts=2023-08-15T01:40:19.899Z caller=nflog.go:275 level=debug component=nflog msg="notification log snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/66988909-cc6e-44b7-8113-9a61c7ec8ca5/nflog: no such file or directory"
  ts=2023-08-15T01:40:19.899Z caller=silence.go:353 level=debug component=silences msg="silences snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/66988909-cc6e-44b7-8113-9a61c7ec8ca5/silences: no such file or directory"
  ts=2023-08-15T01:40:19.899Z caller=cluster.go:266 level=debug component=cluster msg="joined cluster" peers=0
  ts=2023-08-15T01:40:19.899Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:40:19.929Z caller=alertmanager_main.go:413 level=debug externalURL=http://ip-172-31-7-66.us-east-2.compute.internal:35517
  ts=2023-08-15T01:40:19.929Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-9Z5Qi5BaPMc6fB5LtWxom3
  ts=2023-08-15T01:40:19.930Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/webhook-4e35a247-5d11-489e-83c8-40fa597e3e97/config-9Z5Qi5BaPMc6fB5LtWxom3
  ts=2023-08-15T01:40:19.932Z caller=alertmanager_main.go:543 level=debug routePrefix=/
  ts=2023-08-15T01:40:19.933Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:35517
  ts=2023-08-15T01:40:19.933Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:35517
  2023-08-15T01:40:20Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:20Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:20Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:20Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:20Z [34mINFO[0m [32mtest.env[39m AlertManager started {"address": "http://localhost:35517", "opni-address": "http://localhost:824693595272"}
  [1mSTEP:[0m sending alerts to each condition in the router [38;5;243m@ 08/15/23 01:40:20.799[0m
  ts=2023-08-15T01:40:20.801Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[f5800cc][active]
  ts=2023-08-15T01:40:20.805Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[843c13a][active]
  ts=2023-08-15T01:40:20.806Z caller=dispatch.go:163 level=debug component=dispatcher msg="Received alert" alert=[b92943f][active]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:20.806[0m
  2023-08-15T01:40:21Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:21Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:21Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:21Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:21.802Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"0492e20c-7f62-45e6-a1df-458561ea691e\", test=\"0492e20c-7f62-45e6-a1df-458561ea691e\"}" msg=flushing alerts=[[f5800cc][active]]
  ts=2023-08-15T01:40:21.806Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  ts=2023-08-15T01:40:21.806Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test!=\"\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:21.806Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:21.806Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:21.809[0m
  ts=2023-08-15T01:40:21.900Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.000906662s
  2023-08-15T01:40:22Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:22Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:22Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:22Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:22.812[0m
  2023-08-15T01:40:23Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:23Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:23Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:23Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:23.816[0m
  ts=2023-08-15T01:40:23.900Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=4.001237221s
  2023-08-15T01:40:24Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:24Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:24Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:24Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:24.82[0m
  2023-08-15T01:40:25Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:25Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:25Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:25Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:25.823[0m
  ts=2023-08-15T01:40:25.901Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=6.001417472s
  2023-08-15T01:40:26Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:26Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:26Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:26Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:26.827[0m
  2023-08-15T01:40:27Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:27Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:27Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:27Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:27.831[0m
  ts=2023-08-15T01:40:27.901Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=8.002091736s
  2023-08-15T01:40:28Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:28Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:28Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:28Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:28.834[0m
  2023-08-15T01:40:29Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:29Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:29Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:29Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:29.838[0m
  ts=2023-08-15T01:40:29.902Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.002835787s
  ts=2023-08-15T01:40:29.905Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__22e67d2a-f6c0-461e-8a14-ee6be7004cfd integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:29.905Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:29.905Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:29.905Z caller=notify.go:751 level=debug component=dispatcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfe0ae62dd32 integration=webhook[1] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:29.905Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}:{opni_uuid=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\", test=\"22e67d2a-f6c0-461e-8a14-ee6be7004cfd\"}" msg=flushing alerts=[[843c13a][active]]
  ts=2023-08-15T01:40:29.905Z caller=dispatch.go:515 level=debug component=dispatcher aggrGroup="{}/{opni_datasource=\"\"}/{test!=\"\"}/{test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}:{opni_uuid=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\", test=\"a135cbb4-f039-4f29-9153-dfe0ae62dd32\"}" msg=flushing alerts=[[b92943f][active]]
  ts=2023-08-15T01:40:29.906Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  ts=2023-08-15T01:40:29.906Z caller=notify.go:751 level=debug component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify success" attempts=1
  2023-08-15T01:40:30Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:30Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:30Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:30Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  [1mSTEP:[0m getting the AlertManager state [38;5;243m@ 08/15/23 01:40:30.841[0m
  [1mSTEP:[0m dynamic-alert-routing step: expecting that the router can build the config [38;5;243m@ 08/15/23 01:40:30.844[0m
  [1mSTEP:[0m dynamic-alert-routing step: expecting that the formed alertmanager config is correct [38;5;243m@ 08/15/23 01:40:30.844[0m
  [1mSTEP:[0m checking that the config passes the marshalling validation [38;5;243m@ 08/15/23 01:40:30.845[0m
  [1mSTEP:[0m checking that the config passes the unmarshalling validation [38;5;243m@ 08/15/23 01:40:30.849[0m
  [1mSTEP:[0m writing the config file to a temporary directory [38;5;243m@ 08/15/23 01:40:30.854[0m
  [1mSTEP:[0m Verifying that the config can be loaded by alertmanager [38;5;243m@ 08/15/23 01:40:30.854[0m
  2023-08-15T01:40:30Z [34mINFO[0m [32mtest.env[39m Waiting for alertmanager to start...
  ts=2023-08-15T01:40:30.954Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:40:30.954Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:40:30.954Z caller=cluster.go:173 level=debug component=cluster msg="resolved peers to following addresses" peers=
  2023-08-15T01:40:30Z [34mINFO[0m [36mplugin.opni.alerting[39m [2mextensions/embedded_server.go:88[22m starting opni embedded server {"addr": ":33703"}
  ts=2023-08-15T01:40:30.957Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=42007
  ts=2023-08-15T01:40:30.957Z caller=delegate.go:236 level=debug component=cluster received=NotifyJoin node=01H7VDM1KDKHQSMB0F8575GNBZ addr=172.31.7.66:42007
  ts=2023-08-15T01:40:30.958Z caller=nflog.go:275 level=debug component=nflog msg="notification log snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/65d13bae-e61e-460f-854f-e03bfebcfaf1/nflog: no such file or directory"
  ts=2023-08-15T01:40:30.958Z caller=silence.go:353 level=debug component=silences msg="silences snapshot file doesn't exist" err="open /tmp/opni-test-2132242568/alertmanager_data/65d13bae-e61e-460f-854f-e03bfebcfaf1/silences: no such file or directory"
  ts=2023-08-15T01:40:30.958Z caller=cluster.go:266 level=debug component=cluster msg="joined cluster" peers=0
  ts=2023-08-15T01:40:30.958Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:40:30.989Z caller=alertmanager_main.go:413 level=debug externalURL=http://ip-172-31-7-66.us-east-2.compute.internal:36625
  ts=2023-08-15T01:40:30.989Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-d641c788-8419-4aa8-8c99-5c79ace97dc4/config-U9AJ2KpRYwn2padF6REDy4
  ts=2023-08-15T01:40:30.990Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-d641c788-8419-4aa8-8c99-5c79ace97dc4/config-U9AJ2KpRYwn2padF6REDy4
  ts=2023-08-15T01:40:30.992Z caller=alertmanager_main.go:543 level=debug routePrefix=/
  ts=2023-08-15T01:40:30.993Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:36625
  ts=2023-08-15T01:40:30.993Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:36625
  2023-08-15T01:40:31Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:31Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:31Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:31Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m AlertManager started {"address": "http://localhost:36625", "opni-address": "http://localhost:824705117080"}
[38;5;10m• [34.192 seconds][0m
[38;5;243m------------------------------[0m
[0mmetrics and alerting [38;5;243mwhen When we use alerting on metrics [0m[1mshould setup alertig & metrics clusters[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/metrics_test.go:37[0m
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m Starting test environment
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m Copying 7 files from embedded testdata/cortex to /tmp/opni-test-1343125945/cortex
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m Waiting for jetstream to start...
  [231568] 2023/08/15 01:40:31.870009 [INF] Starting nats-server
  [231568] 2023/08/15 01:40:31.870058 [INF]   Version:  2.9.21
  [231568] 2023/08/15 01:40:31.870062 [INF]   Git:      [b2e7725]
  [231568] 2023/08/15 01:40:31.870066 [INF]   Name:     NBXVAIKYEU7FBTAO2673LMATBW2URPRH6FUVPMUF7F5QVLDRH27IZVNC
  [231568] 2023/08/15 01:40:31.870072 [INF]   Node:     GU4SqiYQ
  [231568] 2023/08/15 01:40:31.870076 [INF]   ID:       NBXVAIKYEU7FBTAO2673LMATBW2URPRH6FUVPMUF7F5QVLDRH27IZVNC
  [231568] 2023/08/15 01:40:31.870098 [INF] Using configuration file: /tmp/opni-test-1343125945/jetstream/jetstream.conf
  [231568] 2023/08/15 01:40:31.870791 [INF] Starting JetStream
  [231568] 2023/08/15 01:40:31.870951 [INF]     _ ___ _____ ___ _____ ___ ___   _   __  __
  [231568] 2023/08/15 01:40:31.871030 [INF]  _ | | __|_   _/ __|_   _| _ \ __| /_\ |  \/  |
  [231568] 2023/08/15 01:40:31.871077 [INF] | || | _|  | | \__ \ | | |   / _| / _ \| |\/| |
  [231568] 2023/08/15 01:40:31.871092 [INF]  \__/|___| |_| |___/ |_| |_|_\___/_/ \_\_|  |_|
  [231568] 2023/08/15 01:40:31.871096 [INF] 
  [231568] 2023/08/15 01:40:31.871099 [INF]          https://docs.nats.io/jetstream
  [231568] 2023/08/15 01:40:31.871102 [INF] 
  [231568] 2023/08/15 01:40:31.871105 [INF] ---------------- JETSTREAM ----------------
  [231568] 2023/08/15 01:40:31.871112 [INF]   Max Memory:      11.71 GB
  [231568] 2023/08/15 01:40:31.871117 [INF]   Max Storage:     5.29 GB
  [231568] 2023/08/15 01:40:31.871120 [INF]   Store Directory: "/tmp/opni-test-1343125945/jetstream/data/jetstream"
  [231568] 2023/08/15 01:40:31.871123 [INF] -------------------------------------------
  [231568] 2023/08/15 01:40:31.871577 [INF] Listening for client connections on 0.0.0.0:32799
  [231568] 2023/08/15 01:40:31.871952 [INF] Server is ready
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m Jetstream started
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-1343125945/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway[39m found 0 plugins
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway[39m loaded plugin manifest {"plugins": 0}
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway.cache[39m compressing and archiving plugins...
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.cache[39m added 0 new plugins to cache
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway[39m running plugin cache gc
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "binary"
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "kubernetes"
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "noop"
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "control.HealthListener"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m registering internal service {"service": "stream.Delegate"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "core.Pinger"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mtest.env[39m Loading gateway plugins...
  2023-08-15T01:40:31Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.backends.Capability", "opni.Metrics"]}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.Metrics", "opni.backends.Capability", "opni.apiextensions.StreamAPIExtension", "opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.ManagementAPIExtension"]}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m internal gateway stream connected
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/alerting", "capability": "alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/metrics", "capability": "metrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexadmin.CortexAdmin
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.grpc[39m plugin rejected internal stream connection {"plugin": "plugin_alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m calling client handler
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.System"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.System"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/trace", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/profile", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/block", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/heap", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/ready", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/healthy", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexadmin.CortexAdmin"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/AllUserStats"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/WriteMetrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/Query"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/QueryRange"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetRule"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricMetadata"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ListRules"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/LoadRules"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/DeleteRule"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/FlushBlocks"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetSeriesMetrics"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricLabelSets"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexStatus"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexConfig"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ExtractRawSeries"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexadmin.CortexAdmin", "rules": 17}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexadmin.CortexAdmin", "rules": [{"http":{"Pattern":{"Get":"/all_user_stats"}},"method":{"name":"AllUserStats","input_type":".google.protobuf.Empty","output_type":".cortexadmin.UserIDStatsList","options":{}}},{"http":{"Pattern":{"Post":"/write_metrics"},"body":"*"},"method":{"name":"WriteMetrics","input_type":".cortexadmin.WriteRequest","output_type":".cortexadmin.WriteResponse","options":{}}},{"http":{"Pattern":{"Get":"/query"},"additional_bindings":[{"Pattern":{"Post":"/query"},"body":"*"}]},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query"},"body":"*"},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/query_range"},"additional_bindings":[{"Pattern":{"Post":"/query_range"},"body":"*"}]},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query_range"},"body":"*"},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/rules/{namespace}/{groupName}"}},"method":{"name":"GetRule","input_type":".cortexadmin.GetRuleRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/metadata"}},"method":{"name":"GetMetricMetadata","input_type":".cortexadmin.MetricMetadataRequest","output_type":".cortexadmin.MetricMetadata","options":{}}},{"http":{"Pattern":{"Get":"/rules"}},"method":{"name":"ListRules","input_type":".cortexadmin.ListRulesRequest","output_type":".cortexadmin.ListRulesResponse","options":{}}},{"http":{"Pattern":{"Post":"/rules"}},"method":{"name":"LoadRules","input_type":".cortexadmin.LoadRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/rules/{groupName}"}},"method":{"name":"DeleteRule","input_type":".cortexadmin.DeleteRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/flush_blocks"}},"method":{"name":"FlushBlocks","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/series/metadata"}},"method":{"name":"GetSeriesMetrics","input_type":".cortexadmin.SeriesRequest","output_type":".cortexadmin.SeriesInfoList","options":{}}},{"http":{"Pattern":{"Get":"/series/labels"}},"method":{"name":"GetMetricLabelSets","input_type":".cortexadmin.LabelRequest","output_type":".cortexadmin.MetricLabels","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetCortexStatus","input_type":".google.protobuf.Empty","output_type":".cortexadmin.CortexStatus","options":{}}},{"http":{"Pattern":{"Get":"/config"}},"method":{"name":"GetCortexConfig","input_type":".cortexadmin.ConfigRequest","output_type":".cortexadmin.ConfigResponse","options":{}}},{"http":{"Pattern":{"Get":"/series/raw"}},"method":{"name":"ExtractRawSeries","input_type":".cortexadmin.MatcherRequest","output_type":".cortexadmin.QueryResponse","options":{}}}]}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexops.CortexOps
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertConditions
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexops.CortexOps"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterConfiguration"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/ConfigureCluster"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterStatus"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/UninstallCluster"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexops.CortexOps", "rules": 4}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexops.CortexOps", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".cortexops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".cortexops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".cortexops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service remoteread.RemoteReadGateway
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading service {"name": "remoteread.RemoteReadGateway"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/AddTarget"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/EditTarget"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/RemoveTarget"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/ListTargets"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Start"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Stop"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/GetTargetStatus"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Discover"}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "remoteread.RemoteReadGateway", "rules": 8}
  2023-08-15T01:40:31Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "remoteread.RemoteReadGateway", "rules": [{"http":{"Pattern":{"Post":"/targets"},"body":"*"},"method":{"name":"AddTarget","input_type":".remoteread.TargetAddRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Put":"/targets"},"body":"*"},"method":{"name":"EditTarget","input_type":".remoteread.TargetEditRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/targets/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"RemoveTarget","input_type":".remoteread.TargetRemoveRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/targets"}},"method":{"name":"ListTargets","input_type":".remoteread.TargetListRequest","output_type":".remoteread.TargetList","options":{}}},{"http":{"Pattern":{"Post":"/targets/start/{target.meta.clusterId}/{target.meta.name}"},"body":"*"},"method":{"name":"Start","input_type":".remoteread.StartReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/targets/stop/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"Stop","input_type":".remoteread.StopReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status"},"body":"*"},"method":{"name":"GetTargetStatus","input_type":".remoteread.TargetStatusRequest","output_type":".remoteread.TargetStatus","options":{}}},{"http":{"Pattern":{"Post":"/edit"},"body":"*"},"method":{"name":"Discover","input_type":".remoteread.DiscoveryRequest","output_type":".remoteread.DiscoveryResponse","options":{}}}]}
  2023-08-15T01:40:31Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service node.metrics.NodeConfiguration
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "node.metrics.NodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "node.metrics.NodeConfiguration", "rules": 4}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "node.metrics.NodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".node.metrics.MetricsCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".node.metrics.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m using cluster driver {"driver": "test-environment"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.opni.alerting[39m starting opni embedded server {"addr": "127.0.0.1:44103"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.metrics.cortex-http[39m configuring http api server
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /ready", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertConditions"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionGroups"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CreateAlertCondition"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/GetAlertCondition"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditions"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/UpdateAlertCondition"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionChoices"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeleteAlertCondition"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/AlertConditionStatus"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionsWithStatus"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CloneTo"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ActivateSilence"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeactivateSilence"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/Timeline"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertConditions", "rules": 13}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertConditions", "rules": [{"http":{"Pattern":{"Get":"/groups"}},"method":{"name":"ListAlertConditionGroups","input_type":".google.protobuf.Empty","output_type":".core.ReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertCondition","input_type":".alerting.AlertCondition","output_type":".alerting.ConditionReference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertCondition","input_type":".alerting.ConditionReference","output_type":".alerting.AlertCondition","options":{}}},{"http":{"Pattern":{"Post":"/list"},"body":"*"},"method":{"name":"ListAlertConditions","input_type":".alerting.ListAlertConditionRequest","output_type":".alerting.AlertConditionList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertCondition","input_type":".alerting.UpdateAlertConditionRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/choices"}},"method":{"name":"ListAlertConditionChoices","input_type":".alerting.AlertDetailChoicesRequest","output_type":".alerting.ListAlertTypeDetails","options":{}}},{"http":{"Pattern":{"Delete":"/configure"}},"method":{"name":"DeleteAlertCondition","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status/{id}"}},"method":{"name":"AlertConditionStatus","input_type":".alerting.ConditionReference","output_type":".alerting.AlertStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/list/withStatus"},"body":"*"},"method":{"name":"ListAlertConditionsWithStatus","input_type":".alerting.ListStatusRequest","output_type":".alerting.ListStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/clone"},"body":"*"},"method":{"name":"CloneTo","input_type":".alerting.CloneToRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/silences"},"body":"*"},"method":{"name":"ActivateSilence","input_type":".alerting.SilenceRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/silences"}},"method":{"name":"DeactivateSilence","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/timeline"}},"method":{"name":"Timeline","input_type":".alerting.TimelineRequest","output_type":".alerting.TimelineResponse","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertEndpoints
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertEndpoints"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/CreateAlertEndpoint"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/GetAlertEndpoint"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ToggleNotifications"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ListAlertEndpoints"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/UpdateAlertEndpoint"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/DeleteAlertEndpoint"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/TestAlertEndpoint"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertEndpoints", "rules": 7}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertEndpoints", "rules": [{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertEndpoint","input_type":".alerting.AlertEndpoint","output_type":".core.Reference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertEndpoint","input_type":".core.Reference","output_type":".alerting.AlertEndpoint","options":{}}},{"http":{"Pattern":{"Post":"/toggleNotifications"},"body":"*"},"method":{"name":"ToggleNotifications","input_type":".alerting.ToggleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/list"}},"method":{"name":"ListAlertEndpoints","input_type":".alerting.ListAlertEndpointsRequest","output_type":".alerting.AlertEndpointList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertEndpoint","input_type":".alerting.UpdateAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/delete"},"body":"*"},"method":{"name":"DeleteAlertEndpoint","input_type":".alerting.DeleteAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/test"},"body":"*"},"method":{"name":"TestAlertEndpoint","input_type":".alerting.TestAlertEndpointRequest","output_type":".alerting.TestAlertEndpointResponse","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertNotifications
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertNotifications"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/TriggerAlerts"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ResolveAlerts"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/PushNotification"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListNotifications"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListAlarmMessages"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListRoutingRelationships"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertNotifications", "rules": 4}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertNotifications", "rules": [{"http":{"Pattern":{"Post":"/trigger"},"body":"*"},"method":{"name":"TriggerAlerts","input_type":".alerting.TriggerAlertsRequest","output_type":".alerting.TriggerAlertsResponse","options":{}}},{"http":{"Pattern":{"Post":"/push"},"body":"*"},"method":{"name":"PushNotification","input_type":".alerting.Notification","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/notifications/list"},"body":"*"},"method":{"name":"ListNotifications","input_type":".alerting.ListNotificationRequest","output_type":".alerting.ListMessageResponse","options":{}}},{"http":{"Pattern":{"Post":"/alarms/list"},"body":"*"},"method":{"name":"ListAlarmMessages","input_type":".alerting.ListAlarmMessageRequest","output_type":".alerting.ListMessageResponse","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.AlertingAdmin
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.AlertingAdmin"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/ConfigureCluster"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterStatus"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/InstallCluster"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/UninstallCluster"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/Info"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.ops.AlertingAdmin", "rules": 6}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.ops.AlertingAdmin", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".alerting.ops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".alerting.ops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/install"}},"method":{"name":"InstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".alerting.ops.UninstallRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/info"}},"method":{"name":"Info","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ComponentInfo","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.ConfigReconciler
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.ConfigReconciler/SyncConfig"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m service has no http rules {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.AlertingNodeConfiguration
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.AlertingNodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.AlertingNodeConfiguration", "rules": 4}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.AlertingNodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".alerting.node.AlertingCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".alerting.node.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.NodeAlertingCapability
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.NodeAlertingCapability"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.NodeAlertingCapability/Sync"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.NodeAlertingCapability", "rules": 1}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.NodeAlertingCapability", "rules": [{"http":{"Pattern":{"Post":"/v1/node/sync"},"body":"*"},"method":{"name":"Sync","input_type":".alerting.node.AlertingCapabilityConfig","output_type":".alerting.node.SyncResponse","options":{}}}]}
  2023-08-15T01:40:32Z [34mINFO[0m [32mtest.env[39m Waiting for gateway to start...
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m management HTTP server starting {"address": "localhost:45639"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mgateway.http[39m gateway HTTP server starting {"api": "127.0.0.1:45615", "metrics": "127.0.0.1:36647"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mtest.env[39m loaded 12 plugins
  2023-08-15T01:40:32Z [34mINFO[0m [32mgateway.grpc[39m gateway gRPC server starting {"address": "127.0.0.1:36691"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mmgmt[39m management gRPC server starting {"address": "127.0.0.1:46283"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/tokens"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/tokens/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/watch"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/clusters/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/certs"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}/health"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/health/watch"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/clusters/{cluster.id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/roles"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/roles"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/roles/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/rolebindings"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/rolebindings"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/subjectaccess"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/apiextensions"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/capabilities"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/capabilities/{name}/installer"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/install"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/uninstall"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/cancel"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/dashboard/settings"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/dashboard/settings"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/all_user_stats"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/write_metrics"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules/{namespace}/{groupName}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/metadata"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/rules"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/CortexAdmin/rules/{groupName}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/flush_blocks"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/metadata"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/labels"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/raw"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/configuration"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/uninstall"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:32Z [34mINFO[0m [32mtest.env[39m Gateway started
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/RemoteReadGateway/targets/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/start/{target.meta.clusterId}/{target.meta.name}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/stop/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/edit"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertConditions/groups"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/choices"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/status/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/withStatus"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/clone"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/silences"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/silences"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/timeline"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/list/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/toggleNotifications"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertEndpoints/list"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/delete"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml --syncer.listen.address=:38629 --syncer.alertmanager.address=http://127.0.0.1:44497 --syncer.gateway.join.address=:46283 syncer {"config-file": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/test"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/trigger"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/push"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml", "alertmanager-port": 44497, "opni-port": 40425}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/notifications/list"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/alarms/list"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/configuration"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/configure"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/status"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/install"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/uninstall"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/info"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config/{id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:40:32Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/NodeAlertingCapability/v1/node/sync"}
  ts=2023-08-15T01:40:32.162Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:40:32.162Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:40:32.165Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=39079
  ts=2023-08-15T01:40:32.166Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:40:32.197Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  ts=2023-08-15T01:40:32.199Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  ts=2023-08-15T01:40:32.201Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:44497
  ts=2023-08-15T01:40:32.201Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:44497
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:32Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:32.959Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.000539108s
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml", "port": 38629}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml", "address": "http://127.0.0.1:44497"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m updating known peers : [{http://127.0.0.1:44497 http://127.0.0.1:44103}]
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "(all)", "capability": "metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Waiting for cortex to start...
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent1", "address": "127.0.0.1:46699", "version": "v2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent1
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:40:33Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension", "opni.backends.Capability"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:46699"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:46283
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity 6af4aa22-8ad6-4656-b187-103ece63a491
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  ts=2023-08-15T01:40:33.18017799Z caller=experimental.go:19 level=warn msg="experimental feature in use" feature=tenant-federation
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "6e33b99a-7400-45fd-8d69-2d0f7dddaf82"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "bd425fda-bda6-4fee-ad58-e7b42139b468"}
  ts=2023-08-15T01:40:33.188315242Z caller=modules.go:331 level=warn msg="Worker address is empty in single binary mode.  Attempting automatic worker configuration.  If queries are unresponsive consider configuring the worker explicitly." address=127.0.0.1:37009
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml"}
  ts=2023-08-15T01:40:33.198Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  ts=2023-08-15T01:40:33.199Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Waiting for cortex to start... {"status": "503 Service Unavailable"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent1"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent1", "connected": true}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": true, "conditions": []}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Cortex started {"httpAddress": "https://localhost:41355", "grpcAddress": "localhost:37009"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent2", "address": "127.0.0.1:40937", "version": "v2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent2
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:40:33Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:40937"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent2", "connected": true}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent2", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": true, "conditions": []}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent3", "address": "127.0.0.1:46631", "version": "v2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent3
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:40:33Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent3 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent3 is now active
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:46631"}
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent3", "connected": true}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent3", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent3", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent3", "ready": true, "conditions": []}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent3", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent3", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
[38;5;10m• [1.834 seconds][0m
[38;5;243m------------------------------[0m
[0mmetrics and alerting [38;5;243mwhen When we use alerting on metrics [0m[1mshould create prometheus query alerts that map to endpoints[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/metrics_test.go:87[0m
  [1mSTEP:[0m creating webhook endpoints for receiving the prometheus alerting [38;5;243m@ 08/15/23 01:40:33.698[0m
  [1mSTEP:[0m creating prometheus query alert conditions [38;5;243m@ 08/15/23 01:40:33.713[0m
  [1mSTEP:[0m making sure when metrics aren't installed, the conditions are invalid [38;5;243m@ 08/15/23 01:40:33.732[0m
[38;5;10m• [0.036 seconds][0m
[38;5;243m------------------------------[0m
[0mmetrics and alerting [38;5;243mwhen When we use alerting on metrics [0m[1mthe metrics -> alerting pipeline should be functional[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/metrics_test.go:180[0m
  [1mSTEP:[0m installing the metrics capabilities [38;5;243m@ 08/15/23 01:40:33.733[0m
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["metrics"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m ignoring sync request due to capability filter 'alerting' {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m received sync request
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "agent1", "capability": "metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent2", "capabilities": ["metrics"]}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m received sync request
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule sync
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m enabling http server
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m ignoring sync request due to capability filter 'alerting' {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m configuring rule discovery
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery configured
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery notifier configured {"interval": "15m0s"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule group update notifier
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m starting prometheus {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent2", "time": "2023-08-15T01:40:33Z"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Waiting for prometheus to start...
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "agent2", "capability": "metrics"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent3", "capabilities": ["metrics"]}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m starting prometheus {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m received sync request
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent2"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule sync
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m enabling http server
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Waiting for prometheus to start...
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m configuring rule discovery
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery configured
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery notifier configured {"interval": "15m0s"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule group update notifier
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m ignoring sync request due to capability filter 'alerting' {"component": "health-cfg-sync"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "agent3", "capability": "metrics"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent3", "time": "2023-08-15T01:40:33Z"}
  [1mSTEP:[0m verifying the conditions move to the firing state [38;5;243m@ 08/15/23 01:40:33.761[0m
  [1mSTEP:[0m making sure when metrics aren't installed, the conditions are invalid [38;5;243m@ 08/15/23 01:40:33.761[0m
  [1mSTEP:[0m verifying the webhook endpoints have received the message [38;5;243m@ 08/15/23 01:40:33.761[0m
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent3"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule sync
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m enabling http server
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m starting prometheus {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m configuring rule discovery
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery configured
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery notifier configured {"interval": "15m0s"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule group update notifier
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent3", "driver": "otel"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent3", "driver": "otel"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Waiting for prometheus to start...
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Prometheus started {"address": "http://localhost:34255", "dir": "/tmp/opni-test-1343125945/prometheus/agent2", "agentId": "agent2"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m started prometheus {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Prometheus started {"address": "http://localhost:43691", "dir": "/tmp/opni-test-1343125945/prometheus/agent1", "agentId": "agent1"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m started prometheus {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m Prometheus started {"address": "http://localhost:36529", "dir": "/tmp/opni-test-1343125945/prometheus/agent3", "agentId": "agent3"}
  2023-08-15T01:40:33Z [34mINFO[0m [32mtest.env[39m started prometheus {"node": "agent3", "driver": "prometheus"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent3"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:521667536} id:"qqYBdqk7WPkARoRmrZQ6vX" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent1"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:126508511} id:"W8UA3Qt2is9jQ5jeTguLWP" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m name: uxELjJ6dzuXu3EbcnWZXgM-opni-alerting
  rules:
      - alert: uxELjJ6dzuXu3EbcnWZXgM
        expr: opni:custom:prometheus_query{opni_uuid="uxELjJ6dzuXu3EbcnWZXgM"}
        for: 10s
        labels:
          opni_promql: uxELjJ6dzuXu3EbcnWZXgM
          opni_severity: Info
          opni_uuid: uxELjJ6dzuXu3EbcnWZXgM
        annotations:
          OpniAlarmName: agent1 sanity metrics
          OpniHeader: prometheus is receiving metrics
          OpniSummary: see title
          opni_clusterId: agent1
          opni_fingerprint: '{{ "ALERTS_FOR_STATE{opni_uuid=\"uxELjJ6dzuXu3EbcnWZXgM\"} OR vector(0)" | query | first | value | printf "%.0f" }}'
          opni_goldenSignal: Custom
          opni_uuid: uxELjJ6dzuXu3EbcnWZXgM
      - record: opni:custom:prometheus_query
        expr: sum(up > 0) > 0
        labels:
          opni_uuid: uxELjJ6dzuXu3EbcnWZXgM
   {"component": "alarms", "Expr": "user-query"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent2"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:323886561} id:"tsMswNN8UA3NDDHLuq4mdn" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onCapabilityStatusCreate": "tsMswNN8UA3NDDHLuq4mdn"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "tsMswNN8UA3NDDHLuq4mdn"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent3"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:527070681} id:"kgWt69xi3LtA7U5u5WgCy7" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onCapabilityStatusCreate": "kgWt69xi3LtA7U5u5WgCy7"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m name: 6WkZhz8wcBYMCCrAh2mR5L-opni-alerting
  rules:
      - alert: 6WkZhz8wcBYMCCrAh2mR5L
        expr: opni:custom:prometheus_query{opni_uuid="6WkZhz8wcBYMCCrAh2mR5L"}
        for: 10s
        labels:
          opni_promql: 6WkZhz8wcBYMCCrAh2mR5L
          opni_severity: Info
          opni_uuid: 6WkZhz8wcBYMCCrAh2mR5L
        annotations:
          OpniAlarmName: agent2 sanity metrics
          OpniHeader: prometheus is receiving metrics
          OpniSummary: see title
          opni_clusterId: agent2
          opni_fingerprint: '{{ "ALERTS_FOR_STATE{opni_uuid=\"6WkZhz8wcBYMCCrAh2mR5L\"} OR vector(0)" | query | first | value | printf "%.0f" }}'
          opni_goldenSignal: Custom
          opni_uuid: 6WkZhz8wcBYMCCrAh2mR5L
      - record: opni:custom:prometheus_query
        expr: sum(up > 0) > 0
        labels:
          opni_uuid: 6WkZhz8wcBYMCCrAh2mR5L
   {"component": "alarms", "Expr": "user-query"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m name: s8sq5YynSQuqNEMoqwL6mQ-opni-alerting
  rules:
      - alert: s8sq5YynSQuqNEMoqwL6mQ
        expr: opni:custom:prometheus_query{opni_uuid="s8sq5YynSQuqNEMoqwL6mQ"}
        for: 10s
        labels:
          opni_promql: s8sq5YynSQuqNEMoqwL6mQ
          opni_severity: Info
          opni_uuid: s8sq5YynSQuqNEMoqwL6mQ
        annotations:
          OpniAlarmName: agent3 sanity metrics
          OpniHeader: prometheus is receiving metrics
          OpniSummary: see title
          opni_clusterId: agent3
          opni_fingerprint: '{{ "ALERTS_FOR_STATE{opni_uuid=\"s8sq5YynSQuqNEMoqwL6mQ\"} OR vector(0)" | query | first | value | printf "%.0f" }}'
          opni_goldenSignal: Custom
          opni_uuid: s8sq5YynSQuqNEMoqwL6mQ
      - record: opni:custom:prometheus_query
        expr: sum(up > 0) > 0
        labels:
          opni_uuid: s8sq5YynSQuqNEMoqwL6mQ
   {"component": "alarms", "Expr": "user-query"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent2"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:319151968} id:"VHHsduREaDEvBj9kcPjSNJ" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent1"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063633 nanos:139779253} id:"fETVFJdkn7WrPwHMiugGSN" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onCapabilityStatusCreate": "fETVFJdkn7WrPwHMiugGSN"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "fETVFJdkn7WrPwHMiugGSN"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "kgWt69xi3LtA7U5u5WgCy7"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml"}
  ts=2023-08-15T01:40:33.955Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  ts=2023-08-15T01:40:33.955Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml
  2023-08-15T01:40:33Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-1343125945/alertmanager-config-373e3580-58e9-4aa7-9189-0a23926d76d2/alertmanager.yaml"}
  ts=2023-08-15T01:40:34.166Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.000294759s
  ts=2023-08-15T01:40:34.279461979Z caller=loader.go:117 level=warn msg="bucket index not found" user=agent2
  ts=2023-08-15T01:40:34.4027482Z caller=loader.go:117 level=warn msg="bucket index not found" user=agent1
  ts=2023-08-15T01:40:34.405248128Z caller=loader.go:117 level=warn msg="bucket index not found" user=agent3
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:34Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  ts=2023-08-15T01:40:34.959Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=4.00108281s
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:216170439 {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:569546527 {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:371422007 {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:216170439 {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:371422007 {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:34Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:569546527 {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:35Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:371422007 {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:35Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:216170439 {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:35Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063633 nanos:569546527 {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:35Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47382: EOF
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47248: read tcp 127.0.0.1:41355->127.0.0.1:47248: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47418: EOF
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47404: read tcp 127.0.0.1:41355->127.0.0.1:47404: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47332: read tcp 127.0.0.1:41355->127.0.0.1:47332: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47342: read tcp 127.0.0.1:41355->127.0.0.1:47342: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47352: read tcp 127.0.0.1:41355->127.0.0.1:47352: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47394: read tcp 127.0.0.1:41355->127.0.0.1:47394: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47420: read tcp 127.0.0.1:41355->127.0.0.1:47420: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47316: read tcp 127.0.0.1:41355->127.0.0.1:47316: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47368: read tcp 127.0.0.1:41355->127.0.0.1:47368: read: connection reset by peer
  2023/08/15 01:40:35 http: TLS handshake error from 127.0.0.1:47460: read tcp 127.0.0.1:41355->127.0.0.1:47460: read: connection reset by peer
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:35Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:36Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47536: read tcp 127.0.0.1:41355->127.0.0.1:47536: read: connection reset by peer
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47670: EOF
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47646: EOF
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:36Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:36Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  ts=2023-08-15T01:40:36.960Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=6.001822481s
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47738: EOF
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47764: read tcp 127.0.0.1:41355->127.0.0.1:47764: read: connection reset by peer
  2023/08/15 01:40:36 http: TLS handshake error from 127.0.0.1:47776: read tcp 127.0.0.1:41355->127.0.0.1:47776: read: connection reset by peer
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:37Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:37Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:37 http: TLS handshake error from 127.0.0.1:47862: read tcp 127.0.0.1:41355->127.0.0.1:47862: read: connection reset by peer
  2023/08/15 01:40:37 http: TLS handshake error from 127.0.0.1:47896: EOF
  2023/08/15 01:40:37 http: TLS handshake error from 127.0.0.1:47914: read tcp 127.0.0.1:41355->127.0.0.1:47914: read: connection reset by peer
  2023/08/15 01:40:37 http: TLS handshake error from 127.0.0.1:48016: read tcp 127.0.0.1:41355->127.0.0.1:48016: read: connection reset by peer
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  ts=2023-08-15T01:40:38.961Z caller=cluster.go:703 level=debug component=cluster msg="gossip looks settled" elapsed=8.002725938s
  2023/08/15 01:40:38 http: TLS handshake error from 127.0.0.1:48038: read tcp 127.0.0.1:41355->127.0.0.1:48038: read: connection reset by peer
  2023-08-15T01:40:38Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:38Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:38 http: TLS handshake error from 127.0.0.1:48100: EOF
  2023/08/15 01:40:38 http: TLS handshake error from 127.0.0.1:48114: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48228: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48218: read tcp 127.0.0.1:41355->127.0.0.1:48218: read: connection reset by peer
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:39Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:39Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48230: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48306: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48362: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48358: read tcp 127.0.0.1:41355->127.0.0.1:48358: read: connection reset by peer
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48374: EOF
  2023/08/15 01:40:39 http: TLS handshake error from 127.0.0.1:48346: EOF
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:40Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  ts=2023-08-15T01:40:40.962Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.003741909s
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:40Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:41Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:41Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58026: EOF
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58090: read tcp 127.0.0.1:41355->127.0.0.1:58090: read: connection reset by peer
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58106: read tcp 127.0.0.1:41355->127.0.0.1:58106: read: connection reset by peer
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58154: read tcp 127.0.0.1:41355->127.0.0.1:58154: read: connection reset by peer
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58226: EOF
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58214: read tcp 127.0.0.1:41355->127.0.0.1:58214: read: connection reset by peer
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58110: read tcp 127.0.0.1:41355->127.0.0.1:58110: read: connection reset by peer
  2023/08/15 01:40:41 http: TLS handshake error from 127.0.0.1:58138: read tcp 127.0.0.1:41355->127.0.0.1:58138: read: connection reset by peer
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58134: EOF
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58188: read tcp 127.0.0.1:41355->127.0.0.1:58188: read: connection reset by peer
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58126: EOF
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58184: EOF
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58132: read tcp 127.0.0.1:41355->127.0.0.1:58132: read: connection reset by peer
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:42.168Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.001481355s
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:42Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:42Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58228: read tcp 127.0.0.1:41355->127.0.0.1:58228: read: connection reset by peer
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58240: read tcp 127.0.0.1:41355->127.0.0.1:58240: read: connection reset by peer
  2023/08/15 01:40:42 http: TLS handshake error from 127.0.0.1:58266: EOF
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58318: EOF
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58354: EOF
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:41759 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46699", "scheme": "http"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:40117 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:40937", "scheme": "http"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:41759 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46699", "scheme": "http"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:40117 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:40937", "scheme": "http"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:42355 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46631", "scheme": "http"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:42355 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46631", "scheme": "http"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:43Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:43Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58412: EOF
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58406: EOF
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58426: EOF
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58458: read tcp 127.0.0.1:41355->127.0.0.1:58458: read: connection reset by peer
  2023/08/15 01:40:43 http: TLS handshake error from 127.0.0.1:58414: read tcp 127.0.0.1:41355->127.0.0.1:58414: read: connection reset by peer
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58524: read tcp 127.0.0.1:41355->127.0.0.1:58524: read: connection reset by peer
  2023-08-15T01:40:44Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58560: EOF
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58544: read tcp 127.0.0.1:41355->127.0.0.1:58544: read: connection reset by peer
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58574: read tcp 127.0.0.1:41355->127.0.0.1:58574: read: connection reset by peer
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58542: EOF
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58670: read tcp 127.0.0.1:41355->127.0.0.1:58670: read: connection reset by peer
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58602: read tcp 127.0.0.1:41355->127.0.0.1:58602: read: connection reset by peer
  2023/08/15 01:40:44 http: TLS handshake error from 127.0.0.1:58626: EOF
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:44Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023/08/15 01:40:45 http: TLS handshake error from 127.0.0.1:58694: EOF
  2023-08-15T01:40:45Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:45Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:46Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:46Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:46 http: TLS handshake error from 127.0.0.1:58950: EOF
  2023/08/15 01:40:46 http: TLS handshake error from 127.0.0.1:58936: read tcp 127.0.0.1:41355->127.0.0.1:58936: read: connection reset by peer
  2023/08/15 01:40:46 http: TLS handshake error from 127.0.0.1:59022: EOF
  2023/08/15 01:40:46 http: TLS handshake error from 127.0.0.1:59034: EOF
  2023/08/15 01:40:47 http: TLS handshake error from 127.0.0.1:59016: read tcp 127.0.0.1:41355->127.0.0.1:59016: read: connection reset by peer
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:47Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:47Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:47 http: TLS handshake error from 127.0.0.1:59076: EOF
  2023/08/15 01:40:47 http: TLS handshake error from 127.0.0.1:59090: EOF
  2023/08/15 01:40:47 http: TLS handshake error from 127.0.0.1:59140: read tcp 127.0.0.1:41355->127.0.0.1:59140: read: connection reset by peer
  2023/08/15 01:40:47 http: TLS handshake error from 127.0.0.1:59128: read tcp 127.0.0.1:41355->127.0.0.1:59128: read: connection reset by peer
  2023/08/15 01:40:48 http: TLS handshake error from 127.0.0.1:59260: EOF
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:48Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:40117 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:40937", "scheme": "http"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:48Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:41759 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46699", "scheme": "http"}
  2023-08-15T01:40:48Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:42355 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46631", "scheme": "http"}
  2023-08-15T01:40:48Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:48Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59372: read tcp 127.0.0.1:41355->127.0.0.1:59372: read: connection reset by peer
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59416: EOF
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:49Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:49Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59480: EOF
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59486: EOF
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59496: EOF
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59490: EOF
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59562: read tcp 127.0.0.1:41355->127.0.0.1:59562: read: connection reset by peer
  2023/08/15 01:40:49 http: TLS handshake error from 127.0.0.1:59548: EOF
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59632: read tcp 127.0.0.1:41355->127.0.0.1:59632: read: connection reset by peer
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59628: read tcp 127.0.0.1:41355->127.0.0.1:59628: read: connection reset by peer
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:50Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:50Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59756: read tcp 127.0.0.1:41355->127.0.0.1:59756: read: connection reset by peer
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59776: EOF
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59732: read tcp 127.0.0.1:41355->127.0.0.1:59732: read: connection reset by peer
  2023/08/15 01:40:50 http: TLS handshake error from 127.0.0.1:59716: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:59810: read tcp 127.0.0.1:41355->127.0.0.1:59810: read: connection reset by peer
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:59874: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:59842: EOF
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:51Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50392: EOF
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:51Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50380: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50374: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50408: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50540: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50504: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50508: EOF
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50422: read tcp 127.0.0.1:41355->127.0.0.1:50422: read: connection reset by peer
  2023/08/15 01:40:51 http: TLS handshake error from 127.0.0.1:50452: read tcp 127.0.0.1:41355->127.0.0.1:50452: read: connection reset by peer
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50556: EOF
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:52Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:52Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50582: read tcp 127.0.0.1:41355->127.0.0.1:50582: read: connection reset by peer
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50604: read tcp 127.0.0.1:41355->127.0.0.1:50604: read: connection reset by peer
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50618: EOF
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50622: read tcp 127.0.0.1:41355->127.0.0.1:50622: read: connection reset by peer
  2023/08/15 01:40:52 http: TLS handshake error from 127.0.0.1:50650: EOF
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:53Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:41759 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46699", "scheme": "http"}
  2023-08-15T01:40:53Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:40117 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:40937", "scheme": "http"}
  2023-08-15T01:40:53Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:42355 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46631", "scheme": "http"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:53Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023/08/15 01:40:53 http: TLS handshake error from 127.0.0.1:50770: EOF
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:53Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:53 http: TLS handshake error from 127.0.0.1:50828: EOF
  2023/08/15 01:40:53 http: TLS handshake error from 127.0.0.1:50840: read tcp 127.0.0.1:41355->127.0.0.1:50840: read: connection reset by peer
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:54Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:40117 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:40937", "scheme": "http"}
  2023-08-15T01:40:54Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:41759 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46699", "scheme": "http"}
  2023-08-15T01:40:54Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/api/agent/push", "to": "127.0.0.1:42355 (plugin_metrics)", "for": "127.0.0.1", "host": "127.0.0.1:46631", "scheme": "http"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:54Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:50960: EOF
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:54Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:50998: read tcp 127.0.0.1:41355->127.0.0.1:50998: read: connection reset by peer
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:50978: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51026: read tcp 127.0.0.1:41355->127.0.0.1:51026: read: connection reset by peer
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51020: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51078: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51076: read tcp 127.0.0.1:41355->127.0.0.1:51076: read: connection reset by peer
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51100: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51050: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51104: EOF
  2023/08/15 01:40:54 http: TLS handshake error from 127.0.0.1:51134: EOF
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/plugin_alerting/alertmanager/api/v2/*any", "to": "127.0.0.1:41281 (plugin_alerting)", "for": "127.0.0.1", "host": "127.0.0.1:45615", "scheme": "https"}
  2023-08-15T01:40:55Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/plugin_alerting/alertmanager/api/v2/*any", "to": "127.0.0.1:41281 (plugin_alerting)", "for": "127.0.0.1", "host": "127.0.0.1:45615", "scheme": "https"}
  2023-08-15T01:40:55Z [35mDEBUG[0m [32mapi[39m => {"method": "POST", "path": "/plugin_alerting/alertmanager/api/v2/*any", "to": "127.0.0.1:41281 (plugin_alerting)", "for": "127.0.0.1", "host": "127.0.0.1:45615", "scheme": "https"}
2023/08/15 01:40:55 http: TLS handshake error from 127.0.0.1:45752: EOF
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [31mERROR[0m [36mplugin.metrics.cortex-admin[39m failed to get cluster status {"error": "rpc error: code = Internal desc = Get \"https://localhost:41477/services\": dial tcp 127.0.0.1:41477: connect: connection refused"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting[39m syncing 9 conditions {"component": "alarms"}
  2023-08-15T01:40:55Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8"}
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (9b6a81496f41fe62a50e55aa6309ffde77430baa7423cce8347375351a45c9f8) config message
  2023-08-15T01:40:55Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:55 http: TLS handshake error from 127.0.0.1:51236: EOF
  2023/08/15 01:40:55 http: TLS handshake error from 127.0.0.1:51216: EOF
  2023/08/15 01:40:55 http: TLS handshake error from 127.0.0.1:51280: read tcp 127.0.0.1:41355->127.0.0.1:51280: read: connection reset by peer
  2023/08/15 01:40:55 http: TLS handshake error from 127.0.0.1:51306: read tcp 127.0.0.1:41355->127.0.0.1:51306: read: connection reset by peer
  2023/08/15 01:40:56 http: TLS handshake error from 127.0.0.1:51358: EOF
  2023/08/15 01:40:56 http: TLS handshake error from 127.0.0.1:51342: EOF
  2023/08/15 01:40:56 http: TLS handshake error from 127.0.0.1:51308: EOF
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (9/9) conditions {"component": "alarms"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:56.300Z caller=notify.go:740 level=warn component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify attempt failed, will retry later" attempts=1 err="Post \"<redacted>\": dial tcp 127.0.0.1:3000: connect: connection refused"
  ts=2023-08-15T01:40:56.413Z caller=notify.go:740 level=warn component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify attempt failed, will retry later" attempts=1 err="Post \"<redacted>\": dial tcp 127.0.0.1:3000: connect: connection refused"
  ts=2023-08-15T01:40:56.415Z caller=notify.go:740 level=warn component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify attempt failed, will retry later" attempts=1 err="Post \"<redacted>\": dial tcp 127.0.0.1:3000: connect: connection refused"
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "tsMswNN8UA3NDDHLuq4mdn"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m shutting down cluster driver update handler
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m exiting main sync loop
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "6e33b99a-7400-45fd-8d69-2d0f7dddaf82"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "kgWt69xi3LtA7U5u5WgCy7"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.alerting[39m closing cortex cluster status watcher... {"watcher": "cortex-cluster-status"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "bd425fda-bda6-4fee-ad58-e7b42139b468"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway[39m shutting down plugins
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "W8UA3Qt2is9jQ5jeTguLWP"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "qqYBdqk7WPkARoRmrZQ6vX"}
  2023-08-15T01:40:56Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "fETVFJdkn7WrPwHMiugGSN"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "VHHsduREaDEvBj9kcPjSNJ"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting[39m failed to receive cluster health status from grpc stream, retrying...
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Cortex stopping...
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [31mERROR[0m [36mplugin.alerting[39m failed to receive cluster event : rpc error: code = Canceled desc = context canceled
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:40:56Z [31mERROR[0m [32mtest[39m agent "agent2" exited: context canceled
  2023-08-15T01:40:56Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:56Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway[39m all plugins shut down
  2023-08-15T01:40:56Z [31mERROR[0m [32mtest[39m agent "agent3" exited: context canceled
  2023-08-15T01:40:56Z [33mWARN[0m [32mtest.env[39m management server exited with error {"error": "context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent3"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [31mERROR[0m [32mtest[39m agent "agent1" exited: context canceled
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:40:56Z [33mWARN[0m [32mgateway[39m http server exited with error {"error": "context canceled"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent3"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:40:56Z [33mWARN[0m [32mtest.env[39m gateway server exited with error {"error": "context canceled"}
  ts=2023-08-15T01:40:56.793Z caller=alertmanager_main.go:601 level=info msg="Received SIGTERM, exiting gracefully..."
  2023-08-15T01:40:56Z [31mERROR[0m [36mplugin.alerting[39m read tcp 127.0.0.1:49688->127.0.0.1:32799: read: connection reset by peer
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:40:56Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
[38;5;10m• [23.076 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen we update an alarm of the disconnect type [0m[1mshould successfully update the group of the alarm[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:154[0m
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Starting test environment
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Copying 7 files from embedded testdata/cortex to /tmp/opni-test-522595029/cortex
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Waiting for jetstream to start...
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Cortex stopped
  [231646] 2023/08/15 01:40:56.819620 [INF] Starting nats-server
  [231646] 2023/08/15 01:40:56.819685 [INF]   Version:  2.9.21
  [231646] 2023/08/15 01:40:56.819689 [INF]   Git:      [b2e7725]
  [231646] 2023/08/15 01:40:56.819696 [INF]   Name:     NBEONMMZHXYZAX6W2XLOBAQX7R4DWEQ27VEUM257CW53JY5AKV6D3QNU
  [231646] 2023/08/15 01:40:56.819701 [INF]   Node:     86Wk6YxY
  [231646] 2023/08/15 01:40:56.819704 [INF]   ID:       NBEONMMZHXYZAX6W2XLOBAQX7R4DWEQ27VEUM257CW53JY5AKV6D3QNU
  [231646] 2023/08/15 01:40:56.819720 [INF] Using configuration file: /tmp/opni-test-522595029/jetstream/jetstream.conf
  [231646] 2023/08/15 01:40:56.820496 [INF] Starting JetStream
  [231646] 2023/08/15 01:40:56.820638 [INF]     _ ___ _____ ___ _____ ___ ___   _   __  __
  [231646] 2023/08/15 01:40:56.820654 [INF]  _ | | __|_   _/ __|_   _| _ \ __| /_\ |  \/  |
  [231646] 2023/08/15 01:40:56.820658 [INF] | || | _|  | | \__ \ | | |   / _| / _ \| |\/| |
  [231646] 2023/08/15 01:40:56.820661 [INF]  \__/|___| |_| |___/ |_| |_|_\___/_/ \_\_|  |_|
  [231646] 2023/08/15 01:40:56.820664 [INF] 
  [231646] 2023/08/15 01:40:56.820667 [INF]          https://docs.nats.io/jetstream
  [231646] 2023/08/15 01:40:56.820670 [INF] 
  [231646] 2023/08/15 01:40:56.820673 [INF] ---------------- JETSTREAM ----------------
  [231646] 2023/08/15 01:40:56.820679 [INF]   Max Memory:      11.71 GB
  [231646] 2023/08/15 01:40:56.820683 [INF]   Max Storage:     5.29 GB
  [231646] 2023/08/15 01:40:56.820686 [INF]   Store Directory: "/tmp/opni-test-522595029/jetstream/data/jetstream"
  [231646] 2023/08/15 01:40:56.820689 [INF] -------------------------------------------
  [231646] 2023/08/15 01:40:56.821056 [INF] Listening for client connections on 0.0.0.0:42403
  [231646] 2023/08/15 01:40:56.821388 [INF] Server is ready
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Jetstream started
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-522595029/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway[39m found 0 plugins
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway[39m loaded plugin manifest {"plugins": 0}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.cache[39m compressing and archiving plugins...
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.cache[39m added 0 new plugins to cache
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway[39m running plugin cache gc
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "binary"
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "kubernetes"
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "noop"
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "control.HealthListener"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m registering internal service {"service": "stream.Delegate"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "core.Pinger"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Loading gateway plugins...
  2023-08-15T01:40:56Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.backends.Capability", "opni.Metrics", "opni.System"]}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.apiextensions.ManagementAPIExtension", "opni.Metrics", "opni.backends.Capability", "opni.apiextensions.StreamAPIExtension", "opni.System", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.System"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.System"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m plugin rejected internal stream connection {"plugin": "plugin_alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m internal gateway stream connected
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/trace", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/profile", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/block", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/heap", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/ready", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/healthy", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexadmin.CortexAdmin
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertConditions
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/metrics", "capability": "metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexadmin.CortexAdmin"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/AllUserStats"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/WriteMetrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/Query"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/QueryRange"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetRule"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricMetadata"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ListRules"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/LoadRules"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/DeleteRule"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/FlushBlocks"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetSeriesMetrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricLabelSets"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexStatus"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexConfig"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ExtractRawSeries"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexadmin.CortexAdmin", "rules": 17}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexadmin.CortexAdmin", "rules": [{"http":{"Pattern":{"Get":"/all_user_stats"}},"method":{"name":"AllUserStats","input_type":".google.protobuf.Empty","output_type":".cortexadmin.UserIDStatsList","options":{}}},{"http":{"Pattern":{"Post":"/write_metrics"},"body":"*"},"method":{"name":"WriteMetrics","input_type":".cortexadmin.WriteRequest","output_type":".cortexadmin.WriteResponse","options":{}}},{"http":{"Pattern":{"Get":"/query"},"additional_bindings":[{"Pattern":{"Post":"/query"},"body":"*"}]},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query"},"body":"*"},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/query_range"},"additional_bindings":[{"Pattern":{"Post":"/query_range"},"body":"*"}]},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query_range"},"body":"*"},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/rules/{namespace}/{groupName}"}},"method":{"name":"GetRule","input_type":".cortexadmin.GetRuleRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/metadata"}},"method":{"name":"GetMetricMetadata","input_type":".cortexadmin.MetricMetadataRequest","output_type":".cortexadmin.MetricMetadata","options":{}}},{"http":{"Pattern":{"Get":"/rules"}},"method":{"name":"ListRules","input_type":".cortexadmin.ListRulesRequest","output_type":".cortexadmin.ListRulesResponse","options":{}}},{"http":{"Pattern":{"Post":"/rules"}},"method":{"name":"LoadRules","input_type":".cortexadmin.LoadRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/rules/{groupName}"}},"method":{"name":"DeleteRule","input_type":".cortexadmin.DeleteRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/flush_blocks"}},"method":{"name":"FlushBlocks","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/series/metadata"}},"method":{"name":"GetSeriesMetrics","input_type":".cortexadmin.SeriesRequest","output_type":".cortexadmin.SeriesInfoList","options":{}}},{"http":{"Pattern":{"Get":"/series/labels"}},"method":{"name":"GetMetricLabelSets","input_type":".cortexadmin.LabelRequest","output_type":".cortexadmin.MetricLabels","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetCortexStatus","input_type":".google.protobuf.Empty","output_type":".cortexadmin.CortexStatus","options":{}}},{"http":{"Pattern":{"Get":"/config"}},"method":{"name":"GetCortexConfig","input_type":".cortexadmin.ConfigRequest","output_type":".cortexadmin.ConfigResponse","options":{}}},{"http":{"Pattern":{"Get":"/series/raw"}},"method":{"name":"ExtractRawSeries","input_type":".cortexadmin.MatcherRequest","output_type":".cortexadmin.QueryResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexops.CortexOps
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m calling client handler
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/alerting", "capability": "alerting"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexops.CortexOps"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/ConfigureCluster"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterStatus"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/UninstallCluster"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexops.CortexOps", "rules": 4}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexops.CortexOps", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".cortexops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".cortexops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".cortexops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service remoteread.RemoteReadGateway
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertConditions"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionGroups"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CreateAlertCondition"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/GetAlertCondition"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditions"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/UpdateAlertCondition"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionChoices"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeleteAlertCondition"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/AlertConditionStatus"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionsWithStatus"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CloneTo"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ActivateSilence"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeactivateSilence"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/Timeline"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertConditions", "rules": 13}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertConditions", "rules": [{"http":{"Pattern":{"Get":"/groups"}},"method":{"name":"ListAlertConditionGroups","input_type":".google.protobuf.Empty","output_type":".core.ReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertCondition","input_type":".alerting.AlertCondition","output_type":".alerting.ConditionReference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertCondition","input_type":".alerting.ConditionReference","output_type":".alerting.AlertCondition","options":{}}},{"http":{"Pattern":{"Post":"/list"},"body":"*"},"method":{"name":"ListAlertConditions","input_type":".alerting.ListAlertConditionRequest","output_type":".alerting.AlertConditionList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertCondition","input_type":".alerting.UpdateAlertConditionRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/choices"}},"method":{"name":"ListAlertConditionChoices","input_type":".alerting.AlertDetailChoicesRequest","output_type":".alerting.ListAlertTypeDetails","options":{}}},{"http":{"Pattern":{"Delete":"/configure"}},"method":{"name":"DeleteAlertCondition","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status/{id}"}},"method":{"name":"AlertConditionStatus","input_type":".alerting.ConditionReference","output_type":".alerting.AlertStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/list/withStatus"},"body":"*"},"method":{"name":"ListAlertConditionsWithStatus","input_type":".alerting.ListStatusRequest","output_type":".alerting.ListStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/clone"},"body":"*"},"method":{"name":"CloneTo","input_type":".alerting.CloneToRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/silences"},"body":"*"},"method":{"name":"ActivateSilence","input_type":".alerting.SilenceRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/silences"}},"method":{"name":"DeactivateSilence","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/timeline"}},"method":{"name":"Timeline","input_type":".alerting.TimelineRequest","output_type":".alerting.TimelineResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertEndpoints
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertEndpoints"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/CreateAlertEndpoint"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/GetAlertEndpoint"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ToggleNotifications"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ListAlertEndpoints"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/UpdateAlertEndpoint"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/DeleteAlertEndpoint"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/TestAlertEndpoint"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertEndpoints", "rules": 7}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertEndpoints", "rules": [{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertEndpoint","input_type":".alerting.AlertEndpoint","output_type":".core.Reference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertEndpoint","input_type":".core.Reference","output_type":".alerting.AlertEndpoint","options":{}}},{"http":{"Pattern":{"Post":"/toggleNotifications"},"body":"*"},"method":{"name":"ToggleNotifications","input_type":".alerting.ToggleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/list"}},"method":{"name":"ListAlertEndpoints","input_type":".alerting.ListAlertEndpointsRequest","output_type":".alerting.AlertEndpointList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertEndpoint","input_type":".alerting.UpdateAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/delete"},"body":"*"},"method":{"name":"DeleteAlertEndpoint","input_type":".alerting.DeleteAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/test"},"body":"*"},"method":{"name":"TestAlertEndpoint","input_type":".alerting.TestAlertEndpointRequest","output_type":".alerting.TestAlertEndpointResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertNotifications
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertNotifications"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/TriggerAlerts"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ResolveAlerts"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/PushNotification"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListNotifications"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListAlarmMessages"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListRoutingRelationships"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertNotifications", "rules": 4}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertNotifications", "rules": [{"http":{"Pattern":{"Post":"/trigger"},"body":"*"},"method":{"name":"TriggerAlerts","input_type":".alerting.TriggerAlertsRequest","output_type":".alerting.TriggerAlertsResponse","options":{}}},{"http":{"Pattern":{"Post":"/push"},"body":"*"},"method":{"name":"PushNotification","input_type":".alerting.Notification","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/notifications/list"},"body":"*"},"method":{"name":"ListNotifications","input_type":".alerting.ListNotificationRequest","output_type":".alerting.ListMessageResponse","options":{}}},{"http":{"Pattern":{"Post":"/alarms/list"},"body":"*"},"method":{"name":"ListAlarmMessages","input_type":".alerting.ListAlarmMessageRequest","output_type":".alerting.ListMessageResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.AlertingAdmin
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.metrics.cortex-http[39m configuring http api server
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "remoteread.RemoteReadGateway"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/AddTarget"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/EditTarget"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/RemoveTarget"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/ListTargets"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Start"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Stop"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/GetTargetStatus"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Discover"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting[39m using cluster driver {"driver": "test-environment"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "remoteread.RemoteReadGateway", "rules": 8}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "remoteread.RemoteReadGateway", "rules": [{"http":{"Pattern":{"Post":"/targets"},"body":"*"},"method":{"name":"AddTarget","input_type":".remoteread.TargetAddRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Put":"/targets"},"body":"*"},"method":{"name":"EditTarget","input_type":".remoteread.TargetEditRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/targets/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"RemoveTarget","input_type":".remoteread.TargetRemoveRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/targets"}},"method":{"name":"ListTargets","input_type":".remoteread.TargetListRequest","output_type":".remoteread.TargetList","options":{}}},{"http":{"Pattern":{"Post":"/targets/start/{target.meta.clusterId}/{target.meta.name}"},"body":"*"},"method":{"name":"Start","input_type":".remoteread.StartReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/targets/stop/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"Stop","input_type":".remoteread.StopReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status"},"body":"*"},"method":{"name":"GetTargetStatus","input_type":".remoteread.TargetStatusRequest","output_type":".remoteread.TargetStatus","options":{}}},{"http":{"Pattern":{"Post":"/edit"},"body":"*"},"method":{"name":"Discover","input_type":".remoteread.DiscoveryRequest","output_type":".remoteread.DiscoveryResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service node.metrics.NodeConfiguration
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.AlertingAdmin"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterConfiguration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/ConfigureCluster"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterStatus"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /ready", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.opni.alerting[39m starting opni embedded server {"addr": "127.0.0.1:43845"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/InstallCluster"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "node.metrics.NodeConfiguration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/UninstallCluster"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "node.metrics.NodeConfiguration", "rules": 4}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/Info"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "node.metrics.NodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".node.metrics.MetricsCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".node.metrics.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.ops.AlertingAdmin", "rules": 6}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.ops.AlertingAdmin", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".alerting.ops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".alerting.ops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/install"}},"method":{"name":"InstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".alerting.ops.UninstallRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/info"}},"method":{"name":"Info","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ComponentInfo","options":{}}}]}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.ConfigReconciler
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.ConfigReconciler/SyncConfig"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m service has no http rules {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.AlertingNodeConfiguration
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.AlertingNodeConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.AlertingNodeConfiguration", "rules": 4}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.AlertingNodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".alerting.node.AlertingCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".alerting.node.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.NodeAlertingCapability
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.NodeAlertingCapability"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.NodeAlertingCapability/Sync"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.NodeAlertingCapability", "rules": 1}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.NodeAlertingCapability", "rules": [{"http":{"Pattern":{"Post":"/v1/node/sync"},"body":"*"},"method":{"name":"Sync","input_type":".alerting.node.AlertingCapabilityConfig","output_type":".alerting.node.SyncResponse","options":{}}}]}
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Waiting for gateway to start...
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m management HTTP server starting {"address": "localhost:38617"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m loaded 12 plugins
  2023-08-15T01:40:56Z [34mINFO[0m [32mmgmt[39m management gRPC server starting {"address": "127.0.0.1:35907"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.grpc[39m gateway gRPC server starting {"address": "127.0.0.1:43731"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mgateway.http[39m gateway HTTP server starting {"api": "127.0.0.1:42365", "metrics": "127.0.0.1:45663"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/tokens"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/tokens/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/watch"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/clusters/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/certs"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}/health"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/health/watch"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/clusters/{cluster.id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/roles"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/roles"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/roles/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/rolebindings"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/rolebindings"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/subjectaccess"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/apiextensions"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/capabilities"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/capabilities/{name}/installer"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/install"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/uninstall"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/cancel"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/dashboard/settings"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/dashboard/settings"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/all_user_stats"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/write_metrics"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules/{namespace}/{groupName}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/metadata"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/rules"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/CortexAdmin/rules/{groupName}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/flush_blocks"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/metadata"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/labels"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/raw"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/configuration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/uninstall"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertConditions/groups"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list"}
  2023-08-15T01:40:56Z [34mINFO[0m [32mtest.env[39m Gateway started
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/choices"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/status/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/withStatus"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/clone"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/silences"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/silences"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/timeline"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/list/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/toggleNotifications"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertEndpoints/list"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/delete"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/test"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/trigger"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/push"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/notifications/list"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/alarms/list"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/RemoteReadGateway/targets/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/start/{target.meta.clusterId}/{target.meta.name}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/stop/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/edit"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/configuration"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml --syncer.listen.address=:41087 --syncer.alertmanager.address=http://127.0.0.1:36163 --syncer.gateway.join.address=:35907 syncer {"config-file": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/configure"}
  2023-08-15T01:40:56Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml", "alertmanager-port": 36163, "opni-port": 33761}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/status"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/install"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/uninstall"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/info"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config/{id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:40:56Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/NodeAlertingCapability/v1/node/sync"}
  ts=2023-08-15T01:40:57.061Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:40:57.061Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:40:57.064Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=46765
  ts=2023-08-15T01:40:57.065Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:40:57.096Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  ts=2023-08-15T01:40:57.096Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  ts=2023-08-15T01:40:57.099Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:36163
  ts=2023-08-15T01:40:57.099Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:36163
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml", "port": 41087}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml", "address": "http://127.0.0.1:36163"}
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.alerting[39m updating known peers : [{http://127.0.0.1:36163 http://127.0.0.1:43845}]
  2023-08-15T01:40:57Z [34mINFO[0m [32mtest.env[39m Waiting for cortex to start...
  2023-08-15T01:40:57Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "(all)", "capability": "metrics"}
  2023-08-15T01:40:57Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent1", "address": "127.0.0.1:36993", "version": "v2"}
  2023-08-15T01:40:57Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:40:57Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent1
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:40:58Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:40:58Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.backends.Capability"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:36993"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:35907
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity d698ddbc-b7c2-4866-868b-f42f0bb9ece1
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "f381c452-12ec-4c96-b432-54636f604a96"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "b1d328c9-a063-4e6f-993d-10490e6e76fb"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  ts=2023-08-15T01:40:58.098819998Z caller=experimental.go:19 level=warn msg="experimental feature in use" feature=tenant-federation
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml"}
  ts=2023-08-15T01:40:58.106Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  ts=2023-08-15T01:40:58.106Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  ts=2023-08-15T01:40:58.108418462Z caller=modules.go:331 level=warn msg="Worker address is empty in single binary mode.  Attempting automatic worker configuration.  If queries are unresponsive consider configuring the worker explicitly." address=127.0.0.1:33573
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent1"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent1", "connected": true}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:40:58Z"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest.env[39m Cortex started {"httpAddress": "https://localhost:46751", "grpcAddress": "localhost:33573"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent2", "address": "127.0.0.1:46475", "version": "v2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": true, "conditions": []}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:40:58Z"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent2
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:40:58Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:40:58Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:46475"}
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent2"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent2", "connected": true}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:58Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent2", "time": "2023-08-15T01:40:58Z"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "otel"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": true, "conditions": []}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:40:58Z"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["metrics"]}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m ignoring sync request due to capability filter 'alerting' {"component": "health-cfg-sync"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m received sync request
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "agent1", "capability": "metrics"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:40:58Z"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule sync
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m enabling http server
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest.env[39m starting prometheus {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m configuring rule discovery
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery configured
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery notifier configured {"interval": "15m0s"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.metrics[39m starting rule group update notifier
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  [1mSTEP:[0m verifying the only the default group exists [38;5;243m@ 08/15/23 01:40:58.484[0m
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest.env[39m Waiting for prometheus to start...
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Updating alert condition id:"bGpeDG5QAFzsEZB5R9j8kk" {"component": "alarms", "handler": "UpdateAlertCondition"}
  [1mSTEP:[0m veriying the condition in the old group storage is not found [38;5;243m@ 08/15/23 01:40:58.504[0m
  [1mSTEP:[0m veryfing the condition has been move to the new group storage [38;5;243m@ 08/15/23 01:40:58.504[0m
[38;5;10m• [1.697 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen we delete an alarm of the metrics type [0m[1mshould successfully submit the alarm for deletion[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:199[0m
  [1mSTEP:[0m verifying the metrics conditions eventually are active successfully [38;5;243m@ 08/15/23 01:40:58.511[0m
  2023/08/15 01:40:58 http: TLS handshake error from 127.0.0.1:40808: EOF
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest.env[39m Prometheus started {"address": "http://localhost:44699", "dir": "/tmp/opni-test-522595029/prometheus/agent1", "agentId": "agent1"}
  2023-08-15T01:40:58Z [34mINFO[0m [32mtest.env[39m started prometheus {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "6af872f48e9930297eb9b7408690ad0524d9893461a72a1bd61fde0594914d2d"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m syncing 6 conditions {"component": "alarms"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (6af872f48e9930297eb9b7408690ad0524d9893461a72a1bd61fde0594914d2d) config message
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml"}
  ts=2023-08-15T01:40:58.890Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  ts=2023-08-15T01:40:58.891Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-522595029/alertmanager-config-a748e770-be6e-4ad4-9b20-7d72ed8c784d/alertmanager.yaml"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent disconnect" description:"some disconnect to remove" alertType:{system:{clusterId:{id:"agent1"} timeout:{seconds:600}}} silence:{} lastUpdated:{seconds:1692063658 nanos:493414883} id:"bGpeDG5QAFzsEZB5R9j8kk" metadata:{key:"opni.io/alarm-inactive" value:"true"} groupId:"new-group" {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 10m0s {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m name: cf9Lm3PynGemtUxhLZ2Ezk-opni-alerting
  rules:
      - alert: cf9Lm3PynGemtUxhLZ2Ezk
        expr: opni:custom:prometheus_query{opni_uuid="cf9Lm3PynGemtUxhLZ2Ezk"}
        for: 1s
        labels:
          opni_promql: cf9Lm3PynGemtUxhLZ2Ezk
          opni_severity: Info
          opni_uuid: cf9Lm3PynGemtUxhLZ2Ezk
        annotations:
          OpniAlarmName: test
          OpniHeader: test
          OpniSummary: Prometheus query
          opni_clusterId: agent1
          opni_fingerprint: '{{ "ALERTS_FOR_STATE{opni_uuid=\"cf9Lm3PynGemtUxhLZ2Ezk\"} OR vector(0)" | query | first | value | printf "%.0f" }}'
          opni_goldenSignal: Custom
          opni_uuid: cf9Lm3PynGemtUxhLZ2Ezk
      - record: opni:custom:prometheus_query
        expr: sum(up > 0) > 0
        labels:
          opni_uuid: cf9Lm3PynGemtUxhLZ2Ezk
   {"component": "alarms", "Expr": "user-query"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent1"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:28040087} id:"dCfr8i4Q6EHPvxZwW9gLt6" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent2"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:297438417} id:"34e6zCJWGxLSxNSP97cftd" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent2"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:302402760} id:"stdRzQww4KPXDy5r3dVAh6" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent1"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:54065227} id:"FsECjbp6G7xntHLX5o9DjR" metadata:{key:"opni.io/alarm-inactive" value:"true"} {"component": "alarms", "onCapabilityStatusCreate": "FsECjbp6G7xntHLX5o9DjR"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
  2023-08-15T01:40:58Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "FsECjbp6G7xntHLX5o9DjR"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (6/6) conditions {"component": "alarms"}
  2023-08-15T01:40:58Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40826: EOF
  ts=2023-08-15T01:40:59.066Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=1 elapsed=2.000373264s
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40830: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40840: read tcp 127.0.0.1:46751->127.0.0.1:40840: read: connection reset by peer
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40846: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40858: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40864: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40872: read tcp 127.0.0.1:46751->127.0.0.1:40872: read: connection reset by peer
  [1mSTEP:[0m deleting the metrics condition [38;5;243m@ 08/15/23 01:40:59.139[0m
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40878: EOF
[38;5;10m• [0.645 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen we delete an alarm of the metrics type [0m[1mshould clean up the dependencies of this alarm[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:258[0m
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40888: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40904: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40916: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40930: EOF
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  ts=2023-08-15T01:40:59.721968567Z caller=loader.go:117 level=warn msg="bucket index not found" user=agent1
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m syncing 6 conditions {"component": "alarms"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "6af872f48e9930297eb9b7408690ad0524d9893461a72a1bd61fde0594914d2d"}
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40938: read tcp 127.0.0.1:46751->127.0.0.1:40938: read: connection reset by peer
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (6af872f48e9930297eb9b7408690ad0524d9893461a72a1bd61fde0594914d2d) config message
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40948: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40950: read tcp 127.0.0.1:46751->127.0.0.1:40950: read: connection reset by peer
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40956: read tcp 127.0.0.1:46751->127.0.0.1:40956: read: connection reset by peer
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40968: read tcp 127.0.0.1:46751->127.0.0.1:40968: read: connection reset by peer
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:41012: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40996: EOF
  2023/08/15 01:40:59 http: TLS handshake error from 127.0.0.1:40984: read tcp 127.0.0.1:46751->127.0.0.1:40984: read: connection reset by peer
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (6/6) conditions {"component": "alarms"}
  2023-08-15T01:40:59Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:356502993 {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:356502993 {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:356502993 {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:40:59Z [35mDEBUG[0m [36mplugin.alerting[39m received agent health update connected true : seconds:1692063658 nanos:119253770 {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
[38;5;10m• [0.974 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen we delete an alarm of the metrics type [0m[1mshould clean up the alarm configuration itself[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:273[0m
[38;5;10m• [0.004 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen We uninstall metrics capability from a cluster that has metrics alarms [0m[1mshould switch these alarms to the invalidated state[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:293[0m
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["metrics"]}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m ignoring sync request due to capability filter 'alerting' {"component": "health-cfg-sync"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m received sync request
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.metrics.metrics-backend[39m node sync requested {"cluster": "agent1", "capability": "metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:41:00Z"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m stopping prometheus {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m stopping rule sync
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m disabling http server
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics[39m rule discovery stream closing {"error": "context canceled"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtasks[39m Stored data will not be deleted {"id": "agent1"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtasks[39m Uninstalling metrics capability for this cluster {"id": "agent1"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtasks[39m Time series data will not be deleted {"id": "agent1"}
[38;5;10m• [0.034 seconds][0m
[38;5;243m------------------------------[0m
  2023-08-15T01:41:00Z [34mINFO[0m [32mtasks[39m Removing capability from cluster metadata {"id": "agent1"}
[0mInvalidated and clean up suite test [38;5;243mwhen we delete an alarm of the internal type [0m[1mshould successfully submit the alarm for deletion[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:327[0m
[38;5;10m• [0.005 seconds][0m
[38;5;243m------------------------------[0m
[0mInvalidated and clean up suite test [38;5;243mwhen we delete an alarm of the internal type [0m[1mshould clean up the alarm configuration itself[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/delete_test.go:334[0m
  2023-08-15T01:41:00Z [34mINFO[0m [32mtasks[39m Capability uninstalled successfully {"id": "agent1"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m syncing 5 conditions {"component": "alarms"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m evaluation context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m evaluation context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "bGpeDG5QAFzsEZB5R9j8kk"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "b1d328c9-a063-4e6f-993d-10490e6e76fb"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "dCfr8i4Q6EHPvxZwW9gLt6"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "f381c452-12ec-4c96-b432-54636f604a96"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "FsECjbp6G7xntHLX5o9DjR"}
  2023-08-15T01:41:00Z [34mINFO[0m [36mplugin.alerting[39m shutting down cluster driver update handler
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m closing cortex cluster status watcher... {"watcher": "cortex-cluster-status"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:00Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway[39m shutting down plugins
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting[39m failed to receive cluster health status from grpc stream, retrying...
  ts=2023-08-15T01:41:00.881Z caller=alertmanager_main.go:601 level=info msg="Received SIGTERM, exiting gracefully..."
  ts=2023-08-15T01:41:00.881Z caller=cluster.go:690 level=info component=cluster msg="gossip not settled but continuing anyway" polls=1 elapsed=3.815512384s
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-disconnect" description:"Alert when the downstream agent disconnects from the opni upstream" labels:"agent-disconnect" labels:"opni" labels:"_default" severity:Critical alertType:{system:{clusterId:{id:"agent2"} timeout:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:297438417} id:"34e6zCJWGxLSxNSP97cftd" metadata:{key:"opni.io/alarm-hash" value:"4029a2c21ef580bbc9f2eaf1add48fb7caadc895c9af7002c2cb5678775bb7a0"} {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent disconnect with timeout 1s {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:41:00Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
write tcp 127.0.0.1:49356->127.0.0.1:42403: write: connection reset by peer on connection [37]
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway[39m all plugins shut down
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m received condition update: name:"agent-capability-unhealthy" description:"Alert when some downstream agent capability becomes unhealthy" labels:"agent-capability-health" labels:"opni" labels:"_default" severity:Critical alertType:{downstreamCapability:{clusterId:{id:"agent2"} capabilityState:"Failure" capabilityState:"Pending" for:{seconds:1}}} lastUpdated:{seconds:1692063658 nanos:302402760} id:"stdRzQww4KPXDy5r3dVAh6" metadata:{key:"opni.io/alarm-hash" value:"5f135eda476394945cbeaf43e3b102d3cbf5a0861e357ae3342ee6fcb86f5d55"} {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m Creating agent capability unhealthy with timeout 1s {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
write tcp 127.0.0.1:49356->127.0.0.1:42403: write: broken pipe on connection [37]
  2023-08-15T01:41:00Z [33mWARN[0m [32mgateway[39m http server exited with error {"error": "context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [32mtest.env[39m gateway server exited with error {"error": "context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:163[22m remote syncer unavailable, reconnecting, ...
  2023-08-15T01:41:00Z [33mWARN[0m [32mtest.env[39m management server exited with error {"error": "context canceled"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "dada5d033f242ec39f88a12fdcc651db58bcfd009f2f1e5aa740ac523f4034bd"}
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [31mERROR[0m [36mplugin.alerting[39m EOF
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Cortex stopping...
  2023-08-15T01:41:00Z [31mERROR[0m [36mplugin.alerting[39m failed to receive cluster event : rpc error: code = Unavailable desc = error reading from server: read unix @->/tmp/plugin1670833980: use of closed network connection
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [31mERROR[0m [32mtest[39m agent "agent2" exited: context canceled
  2023-08-15T01:41:00Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:00Z [31mERROR[0m [32mtest[39m agent "agent1" exited: context canceled
  2023-08-15T01:41:00Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error {"error": "rpc error: code = Canceled desc = context canceled"}
[38;5;10m• [0.721 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [0m[1mshould initially have all nodes using the default config[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:122[0m
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Starting test environment
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Copying 7 files from embedded testdata/cortex to /tmp/opni-test-4032888549/cortex
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Waiting for jetstream to start...
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Cortex stopped
  [231696] 2023/08/15 01:41:00.905057 [INF] Starting nats-server
  [231696] 2023/08/15 01:41:00.905101 [INF]   Version:  2.9.21
  [231696] 2023/08/15 01:41:00.905106 [INF]   Git:      [b2e7725]
  [231696] 2023/08/15 01:41:00.905109 [INF]   Name:     NDUJMJCTVOXVPMTYVHH2W4VPQT6Q42NVYV2OALV44OCWIHI25NDRXJA3
  [231696] 2023/08/15 01:41:00.905115 [INF]   Node:     W4euMW8u
  [231696] 2023/08/15 01:41:00.905119 [INF]   ID:       NDUJMJCTVOXVPMTYVHH2W4VPQT6Q42NVYV2OALV44OCWIHI25NDRXJA3
  [231696] 2023/08/15 01:41:00.905126 [INF] Using configuration file: /tmp/opni-test-4032888549/jetstream/jetstream.conf
  [231696] 2023/08/15 01:41:00.905621 [INF] Starting JetStream
  [231696] 2023/08/15 01:41:00.905794 [INF]     _ ___ _____ ___ _____ ___ ___   _   __  __
  [231696] 2023/08/15 01:41:00.905808 [INF]  _ | | __|_   _/ __|_   _| _ \ __| /_\ |  \/  |
  [231696] 2023/08/15 01:41:00.905812 [INF] | || | _|  | | \__ \ | | |   / _| / _ \| |\/| |
  [231696] 2023/08/15 01:41:00.905815 [INF]  \__/|___| |_| |___/ |_| |_|_\___/_/ \_\_|  |_|
  [231696] 2023/08/15 01:41:00.905818 [INF] 
  [231696] 2023/08/15 01:41:00.905822 [INF]          https://docs.nats.io/jetstream
  [231696] 2023/08/15 01:41:00.905825 [INF] 
  [231696] 2023/08/15 01:41:00.905828 [INF] ---------------- JETSTREAM ----------------
  [231696] 2023/08/15 01:41:00.905833 [INF]   Max Memory:      11.71 GB
  [231696] 2023/08/15 01:41:00.905837 [INF]   Max Storage:     5.29 GB
  [231696] 2023/08/15 01:41:00.905841 [INF]   Store Directory: "/tmp/opni-test-4032888549/jetstream/data/jetstream"
  [231696] 2023/08/15 01:41:00.905843 [INF] -------------------------------------------
  [231696] 2023/08/15 01:41:00.906224 [INF] Listening for client connections on 0.0.0.0:44491
  [231696] 2023/08/15 01:41:00.906543 [INF] Server is ready
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Jetstream started
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-4032888549/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway[39m found 0 plugins
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway[39m loaded plugin manifest {"plugins": 0}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.cache[39m compressing and archiving plugins...
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.cache[39m added 0 new plugins to cache
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway[39m running plugin cache gc
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "binary"
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "kubernetes"
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway.update-server[39m registering update handler for strategy "noop"
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "control.HealthListener"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m registering internal service {"service": "stream.Delegate"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m registering service {"service": "core.Pinger"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mtest.env[39m Loading gateway plugins...
  2023-08-15T01:41:00Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.backends.Capability", "opni.Metrics"]}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.System", "opni.apiextensions.HTTPAPIExtension", "opni.apiextensions.ManagementAPIExtension", "opni.Metrics", "opni.backends.Capability", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.ManagementAPIExtension"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/metrics", "capability": "metrics"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexadmin.CortexAdmin
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertConditions
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.System"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mgateway[39m added capability backend {"plugin": "github.com/rancher/opni/plugins/alerting", "capability": "alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m plugin rejected internal stream connection {"plugin": "plugin_alerting"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mgateway.grpc[39m connecting to gateway plugin {"plugin": "plugin_metrics"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.System"}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexadmin.CortexAdmin"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/AllUserStats"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/WriteMetrics"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/Query"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/QueryRange"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetRule"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricMetadata"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ListRules"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/LoadRules"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/DeleteRule"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/FlushBlocks"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetSeriesMetrics"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetMetricLabelSets"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexStatus"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/GetCortexConfig"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexadmin.CortexAdmin/ExtractRawSeries"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexadmin.CortexAdmin", "rules": 17}
  2023-08-15T01:41:00Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexadmin.CortexAdmin", "rules": [{"http":{"Pattern":{"Get":"/all_user_stats"}},"method":{"name":"AllUserStats","input_type":".google.protobuf.Empty","output_type":".cortexadmin.UserIDStatsList","options":{}}},{"http":{"Pattern":{"Post":"/write_metrics"},"body":"*"},"method":{"name":"WriteMetrics","input_type":".cortexadmin.WriteRequest","output_type":".cortexadmin.WriteResponse","options":{}}},{"http":{"Pattern":{"Get":"/query"},"additional_bindings":[{"Pattern":{"Post":"/query"},"body":"*"}]},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query"},"body":"*"},"method":{"name":"Query","input_type":".cortexadmin.QueryRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/query_range"},"additional_bindings":[{"Pattern":{"Post":"/query_range"},"body":"*"}]},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Post":"/query_range"},"body":"*"},"method":{"name":"QueryRange","input_type":".cortexadmin.QueryRangeRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/rules/{namespace}/{groupName}"}},"method":{"name":"GetRule","input_type":".cortexadmin.GetRuleRequest","output_type":".cortexadmin.QueryResponse","options":{}}},{"http":{"Pattern":{"Get":"/metadata"}},"method":{"name":"GetMetricMetadata","input_type":".cortexadmin.MetricMetadataRequest","output_type":".cortexadmin.MetricMetadata","options":{}}},{"http":{"Pattern":{"Get":"/rules"}},"method":{"name":"ListRules","input_type":".cortexadmin.ListRulesRequest","output_type":".cortexadmin.ListRulesResponse","options":{}}},{"http":{"Pattern":{"Post":"/rules"}},"method":{"name":"LoadRules","input_type":".cortexadmin.LoadRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/rules/{groupName}"}},"method":{"name":"DeleteRule","input_type":".cortexadmin.DeleteRuleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/flush_blocks"}},"method":{"name":"FlushBlocks","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/series/metadata"}},"method":{"name":"GetSeriesMetrics","input_type":".cortexadmin.SeriesRequest","output_type":".cortexadmin.SeriesInfoList","options":{}}},{"http":{"Pattern":{"Get":"/series/labels"}},"method":{"name":"GetMetricLabelSets","input_type":".cortexadmin.LabelRequest","output_type":".cortexadmin.MetricLabels","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetCortexStatus","input_type":".google.protobuf.Empty","output_type":".cortexadmin.CortexStatus","options":{}}},{"http":{"Pattern":{"Get":"/config"}},"method":{"name":"GetCortexConfig","input_type":".cortexadmin.ConfigRequest","output_type":".cortexadmin.ConfigResponse","options":{}}},{"http":{"Pattern":{"Get":"/series/raw"}},"method":{"name":"ExtractRawSeries","input_type":".cortexadmin.MatcherRequest","output_type":".cortexadmin.QueryResponse","options":{}}}]}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service cortexops.CortexOps
  2023-08-15T01:41:00Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m internal gateway stream connected
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertConditions"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionGroups"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CreateAlertCondition"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/GetAlertCondition"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditions"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/UpdateAlertCondition"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionChoices"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeleteAlertCondition"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/AlertConditionStatus"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ListAlertConditionsWithStatus"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/CloneTo"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/ActivateSilence"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/DeactivateSilence"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertConditions/Timeline"}
  2023-08-15T01:41:00Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertConditions", "rules": 13}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertConditions", "rules": [{"http":{"Pattern":{"Get":"/groups"}},"method":{"name":"ListAlertConditionGroups","input_type":".google.protobuf.Empty","output_type":".core.ReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertCondition","input_type":".alerting.AlertCondition","output_type":".alerting.ConditionReference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertCondition","input_type":".alerting.ConditionReference","output_type":".alerting.AlertCondition","options":{}}},{"http":{"Pattern":{"Post":"/list"},"body":"*"},"method":{"name":"ListAlertConditions","input_type":".alerting.ListAlertConditionRequest","output_type":".alerting.AlertConditionList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertCondition","input_type":".alerting.UpdateAlertConditionRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/choices"}},"method":{"name":"ListAlertConditionChoices","input_type":".alerting.AlertDetailChoicesRequest","output_type":".alerting.ListAlertTypeDetails","options":{}}},{"http":{"Pattern":{"Delete":"/configure"}},"method":{"name":"DeleteAlertCondition","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status/{id}"}},"method":{"name":"AlertConditionStatus","input_type":".alerting.ConditionReference","output_type":".alerting.AlertStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/list/withStatus"},"body":"*"},"method":{"name":"ListAlertConditionsWithStatus","input_type":".alerting.ListStatusRequest","output_type":".alerting.ListStatusResponse","options":{}}},{"http":{"Pattern":{"Post":"/clone"},"body":"*"},"method":{"name":"CloneTo","input_type":".alerting.CloneToRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/silences"},"body":"*"},"method":{"name":"ActivateSilence","input_type":".alerting.SilenceRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/silences"}},"method":{"name":"DeactivateSilence","input_type":".alerting.ConditionReference","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/timeline"}},"method":{"name":"Timeline","input_type":".alerting.TimelineRequest","output_type":".alerting.TimelineResponse","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertEndpoints
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertEndpoints"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/CreateAlertEndpoint"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/GetAlertEndpoint"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ToggleNotifications"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/ListAlertEndpoints"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/UpdateAlertEndpoint"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/DeleteAlertEndpoint"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertEndpoints/TestAlertEndpoint"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertEndpoints", "rules": 7}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertEndpoints", "rules": [{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"CreateAlertEndpoint","input_type":".alerting.AlertEndpoint","output_type":".core.Reference","options":{}}},{"http":{"Pattern":{"Post":"/list/{id}"},"body":"*"},"method":{"name":"GetAlertEndpoint","input_type":".core.Reference","output_type":".alerting.AlertEndpoint","options":{}}},{"http":{"Pattern":{"Post":"/toggleNotifications"},"body":"*"},"method":{"name":"ToggleNotifications","input_type":".alerting.ToggleRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/list"}},"method":{"name":"ListAlertEndpoints","input_type":".alerting.ListAlertEndpointsRequest","output_type":".alerting.AlertEndpointList","options":{}}},{"http":{"Pattern":{"Put":"/configure"},"body":"*"},"method":{"name":"UpdateAlertEndpoint","input_type":".alerting.UpdateAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/delete"},"body":"*"},"method":{"name":"DeleteAlertEndpoint","input_type":".alerting.DeleteAlertEndpointRequest","output_type":".alerting.ConditionReferenceList","options":{}}},{"http":{"Pattern":{"Post":"/test"},"body":"*"},"method":{"name":"TestAlertEndpoint","input_type":".alerting.TestAlertEndpointRequest","output_type":".alerting.TestAlertEndpointResponse","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.AlertNotifications
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.AlertNotifications"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/TriggerAlerts"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ResolveAlerts"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/PushNotification"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListNotifications"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListAlarmMessages"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.AlertNotifications/ListRoutingRelationships"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.AlertNotifications", "rules": 4}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.AlertNotifications", "rules": [{"http":{"Pattern":{"Post":"/trigger"},"body":"*"},"method":{"name":"TriggerAlerts","input_type":".alerting.TriggerAlertsRequest","output_type":".alerting.TriggerAlertsResponse","options":{}}},{"http":{"Pattern":{"Post":"/push"},"body":"*"},"method":{"name":"PushNotification","input_type":".alerting.Notification","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/notifications/list"},"body":"*"},"method":{"name":"ListNotifications","input_type":".alerting.ListNotificationRequest","output_type":".alerting.ListMessageResponse","options":{}}},{"http":{"Pattern":{"Post":"/alarms/list"},"body":"*"},"method":{"name":"ListAlarmMessages","input_type":".alerting.ListAlarmMessageRequest","output_type":".alerting.ListMessageResponse","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.AlertingAdmin
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (8) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "cortexops.CortexOps"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/ConfigureCluster"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/GetClusterStatus"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/cortexops.CortexOps/UninstallCluster"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "cortexops.CortexOps", "rules": 4}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "cortexops.CortexOps", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".cortexops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".cortexops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".cortexops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service remoteread.RemoteReadGateway
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.AlertingAdmin"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterConfiguration"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/trace", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/profile", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/block", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/heap", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_alerting/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/ready", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /plugin_alerting/healthy", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_alerting/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v2/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /plugin_alerting/alertmanager/api/v1/*any", "plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/ConfigureCluster"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/GetClusterStatus"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/InstallCluster"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/UninstallCluster"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.AlertingAdmin/Info"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.ops.AlertingAdmin", "rules": 6}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.ops.AlertingAdmin", "rules": [{"http":{"Pattern":{"Get":"/configuration"}},"method":{"name":"GetClusterConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ClusterConfiguration","options":{}}},{"http":{"Pattern":{"Post":"/configure"},"body":"*"},"method":{"name":"ConfigureCluster","input_type":".alerting.ops.ClusterConfiguration","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/status"}},"method":{"name":"GetClusterStatus","input_type":".google.protobuf.Empty","output_type":".alerting.ops.InstallStatus","options":{}}},{"http":{"Pattern":{"Post":"/install"}},"method":{"name":"InstallCluster","input_type":".google.protobuf.Empty","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/uninstall"}},"method":{"name":"UninstallCluster","input_type":".alerting.ops.UninstallRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/info"}},"method":{"name":"Info","input_type":".google.protobuf.Empty","output_type":".alerting.ops.ComponentInfo","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.ops.ConfigReconciler
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.ops.ConfigReconciler/SyncConfig"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m service has no http rules {"name": "alerting.ops.ConfigReconciler"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.AlertingNodeConfiguration
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "remoteread.RemoteReadGateway"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/AddTarget"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/EditTarget"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/RemoveTarget"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/ListTargets"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Start"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Stop"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/GetTargetStatus"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/remoteread.RemoteReadGateway/Discover"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "remoteread.RemoteReadGateway", "rules": 8}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "remoteread.RemoteReadGateway", "rules": [{"http":{"Pattern":{"Post":"/targets"},"body":"*"},"method":{"name":"AddTarget","input_type":".remoteread.TargetAddRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Put":"/targets"},"body":"*"},"method":{"name":"EditTarget","input_type":".remoteread.TargetEditRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Delete":"/targets/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"RemoveTarget","input_type":".remoteread.TargetRemoveRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/targets"}},"method":{"name":"ListTargets","input_type":".remoteread.TargetListRequest","output_type":".remoteread.TargetList","options":{}}},{"http":{"Pattern":{"Post":"/targets/start/{target.meta.clusterId}/{target.meta.name}"},"body":"*"},"method":{"name":"Start","input_type":".remoteread.StartReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/targets/stop/{meta.clusterId}/{meta.name}"},"body":"*"},"method":{"name":"Stop","input_type":".remoteread.StopReadRequest","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Post":"/status"},"body":"*"},"method":{"name":"GetTargetStatus","input_type":".remoteread.TargetStatusRequest","output_type":".remoteread.TargetStatus","options":{}}},{"http":{"Pattern":{"Post":"/edit"},"body":"*"},"method":{"name":"Discover","input_type":".remoteread.DiscoveryRequest","output_type":".remoteread.DiscoveryResponse","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service node.metrics.NodeConfiguration
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.AlertingNodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.AlertingNodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.AlertingNodeConfiguration", "rules": 4}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.AlertingNodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".alerting.node.AlertingCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".alerting.node.AlertingCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".alerting.node.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m got extension descriptor for service alerting.node.NodeAlertingCapability
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "alerting.node.NodeAlertingCapability"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/alerting.node.NodeAlertingCapability/Sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "alerting.node.NodeAlertingCapability", "rules": 1}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "alerting.node.NodeAlertingCapability", "rules": [{"http":{"Pattern":{"Post":"/v1/node/sync"},"body":"*"},"method":{"name":"Sync","input_type":".alerting.node.AlertingCapabilityConfig","output_type":".alerting.node.SyncResponse","options":{}}}]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m calling client handler
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading service {"name": "node.metrics.NodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetDefaultConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetDefaultConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/GetNodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading method {"name": "/node.metrics.NodeConfiguration/SetNodeConfiguration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m loading http rules {"name": "node.metrics.NodeConfiguration", "rules": 4}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m rule descriptors {"name": "node.metrics.NodeConfiguration", "rules": [{"http":{"Pattern":{"Get":"/node_config"}},"method":{"name":"GetDefaultConfiguration","input_type":".google.protobuf.Empty","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config"},"body":"*"},"method":{"name":"SetDefaultConfiguration","input_type":".node.metrics.MetricsCapabilitySpec","output_type":".google.protobuf.Empty","options":{}}},{"http":{"Pattern":{"Get":"/node_config/{id}"}},"method":{"name":"GetNodeConfiguration","input_type":".core.Reference","output_type":".node.metrics.MetricsCapabilitySpec","options":{}}},{"http":{"Pattern":{"Put":"/node_config/{node.id}"},"body":"*"},"method":{"name":"SetNodeConfiguration","input_type":".node.metrics.NodeConfigRequest","output_type":".google.protobuf.Empty","options":{}}}]}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.metrics.cortex-http[39m configuring http api server
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/label/:name/values", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m using cluster driver {"driver": "test-environment"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /prometheus/api/v1/metadata", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /ready", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "GET /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_range", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/query_exemplars", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.opni.alerting[39m starting opni embedded server {"addr": "127.0.0.1:45261"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/read", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/labels", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PUT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "PATCH /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "HEAD /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "OPTIONS /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "DELETE /prometheus/api/v1/series", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "CONNECT /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/alerts", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/v1/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /api/prom/rules", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.http[39m configured route for plugin {"route": "TRACE /multitenant_alertmanager", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mtest.env[39m Waiting for gateway to start...
  2023-08-15T01:41:01Z [34mINFO[0m [32mtest.env[39m loaded 12 plugins
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m management HTTP server starting {"address": "localhost:42285"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mmgmt[39m management gRPC server starting {"address": "127.0.0.1:43185"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.grpc[39m gateway gRPC server starting {"address": "127.0.0.1:46393"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.http[39m gateway HTTP server starting {"api": "127.0.0.1:45035", "metrics": "127.0.0.1:35949"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/tokens"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/tokens/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/tokens/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/watch"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/clusters/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/certs"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{id}/health"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/health/watch"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/clusters/{cluster.id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/roles"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/roles"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/roles/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/rolebindings"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/rolebindings"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/roles"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/rolebindings"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/subjectaccess"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/apiextensions"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/capabilities"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/capabilities/{name}/installer"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/install"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{target.cluster.id}/capabilities/{name}/uninstall"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/Management/clusters/{cluster.id}/capabilities/{name}/uninstall/cancel"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/Management/dashboard/settings"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/Management/dashboard/settings"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/all_user_stats"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/write_metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/query_range"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules/{namespace}/{groupName}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/metadata"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/rules"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mtest.env[39m Gateway started
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/rules"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/CortexAdmin/rules/{groupName}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexAdmin/flush_blocks"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/metadata"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/labels"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexAdmin/series/raw"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertConditions/groups"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertConditions/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/choices"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/status/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/list/withStatus"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/clone"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/silences"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/AlertConditions/silences"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertConditions/timeline"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/list/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/toggleNotifications"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertEndpoints/list"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertEndpoints/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/delete"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertEndpoints/test"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/trigger"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/push"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/notifications/list"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertNotifications/alarms/list"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/configuration"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent1", "address": "127.0.0.1:43839", "version": "v2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/CortexOps/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/CortexOps/uninstall"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/configuration"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/configure"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/install"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/AlertingAdmin/uninstall"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingAdmin/info"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "DELETE", "path": "/RemoteReadGateway/targets/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/RemoteReadGateway/targets"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/start/{target.meta.clusterId}/{target.meta.name}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/targets/stop/{meta.clusterId}/{meta.name}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/status"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/RemoteReadGateway/edit"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/AlertingNodeConfiguration/node_config/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/AlertingNodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "POST", "path": "/NodeAlertingCapability/v1/node/sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "GET", "path": "/NodeConfiguration/node_config/{id}"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mmgmt[39m configured http handler {"method": "PUT", "path": "/NodeConfiguration/node_config/{node.id}"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent1
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mkeyring[39m loaded ephemeral key {"path": "/tmp/opni-test-4032888549/keyring/local-agent.json", "usage": "auth", "labels": {"opni.io/session-attribute":"local"}}
  2023-08-15T01:41:01Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:41:01Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent1 is now active
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension", "opni.backends.Capability", "opni.Health"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:43839"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway[39m ratelimit: 50.000000 available
  2023-08-15T01:41:01Z [34mINFO[0m [32mtest[39m starting agent {"id": "agent2", "address": "127.0.0.1:44837", "version": "v2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m using log level: debug
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent1", "attributes": ["local"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m no existing keyring found, starting bootstrap process
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent1"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent1", "connected": true, "attributes": ["local"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m bootstrap completed successfully
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m added durable ordered push consumer for cluster %sagent2
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m could not find driver : k8s_driver
  2023-08-15T01:41:01Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:01Z [34mINFO[0m [32mpluginloader[39m loading plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent1", "ready": true, "conditions": []}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "prometheus"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent1", "driver": "otel"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent1", "driver": "otel"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/metrics", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension", "opni.apiextensions.HTTPAPIExtension"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.backends.Capability"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m checking if plugin implements any interfaces in the scheme {"plugin": "github.com/rancher/opni/plugins/alerting", "interfaces": ["opni.backends.Capability", "opni.Health", "opni.apiextensions.StreamAPIExtension"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m downstream agent disconnect condition on cluster creation for cluster agent2 is now active
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/metrics
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.Health"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.backends.Capability"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m loaded capability node plugin github.com/rancher/opni/plugins/alerting
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.Health"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/metrics", "id": "opni.apiextensions.HTTPAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m implementation found {"plugin": "github.com/rancher/opni/plugins/alerting", "id": "opni.apiextensions.StreamAPIExtension"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mpluginloader[39m invoking load hooks (4) {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m loaded stream api extension plugin {"plugin": "github.com/rancher/opni/plugins/alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /api/agent/push", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "POST /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/trace", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/threadcreate", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/cmdline", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/profile", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/symbol", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/allocs", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/block", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/goroutine", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/heap", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent[39m configured route for plugin {"route": "GET /debug/plugin_metrics/pprof/mutex", "plugin": "github.com/rancher/opni/plugins/metrics"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent.agent-updater[39m sending manifest sync request {"type": "agent", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.agent-updater[39m received sync response {"type": "agent"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.agent-updater[39m manifest sync complete {"type": "agent", "entries": 1}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32magent.plugin-updater[39m sending manifest sync request {"type": "plugin", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m syncing agent manifest {"strategy": "noop"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.update-server[39m computed updates {"patches": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.plugin-updater[39m received sync response {"type": "plugin"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent.plugin-updater[39m manifest sync complete {"type": "plugin", "entries": 1}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m using unmanaged plugin loader
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m agent http server starting {"address": "127.0.0.1:44837"}
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m connecting to gateway...
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway[39m ratelimit: 49.998515 available
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway-client[39m authenticated {"id": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.grpc[39m handling new stream connection
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream connected {"id": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream connected {"id": "agent2"}
[38;5;10m• [0.346 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [38;5;243mwhen changing the default config [0m[1mshould return the new config for all nodes[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:149[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server started
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received status update {"id": "agent2", "connected": true}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m agent connected {"id": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.delegate[39m agent connected {"id": "agent2"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": false, "conditions": ["plugin_alerting: Config Sync Pending", "plugin_metrics: Config Sync Pending"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m received notify event for 'alerting/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m received notify event for 'metrics/pkg/agent' {"type": "DiscoveryComplete"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m processing discovery complete event
  2023-08-15T01:41:01Z [34mINFO[0m [32magent[39m gateway connected
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting/pkg/agent.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream client is now available
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/agent.stream[39m stream server started
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m syncing metrics node
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics.metrics-backend[39m synced node {"id": "agent2", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting updating node config {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.metrics[39m condition cleared {"condition": "Config Sync", "previous": "Pending"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.metrics[39m updating metrics node config
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.monitor[39m received health update {"id": "agent2", "ready": true, "conditions": []}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m metrics capability config updated {"nodeId": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m rule sync is disabled
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "prometheus"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m configuring node {"node": "agent2", "driver": "otel"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mtest.env[39m nothing to do (already stopped) {"node": "agent2", "driver": "otel"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m alerting capability updated {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m rule sync is disabled {"component": "rule-streamer", "nodeId": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m sent node health update
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m send node health update {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "(all)", "capability": "alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server started
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
[38;5;10m• [0.063 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [38;5;243mwhen setting a config for a node [0m[1mshould return the new config for that node[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:175[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent1", "capability": "alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
[38;5;10m• [0.124 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [38;5;243mwhen resetting a config for a node [0m[1mshould return the default config for that node[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:206[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent1", "capability": "alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
[38;5;10m• [0.127 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [38;5;243mwhen resetting the default config [0m[1mshould return the original default config for all nodes[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:231[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "(all)", "capability": "alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
[38;5;10m• [0.030 seconds][0m
[38;5;243m------------------------------[0m
[0mNode Config [38;5;243mwhen setting a config for a node that is the same as the default [0m[1mshould preserve the config for that node if the default changes[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/node_config_test.go:250[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "agent1", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "agent1", "capability": "alerting"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m sending sync request to agent {"agentId": "", "capabilities": ["alerting"]}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.metrics[39m ignoring sync request due to capability filter
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent1", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m received alerting node sync request {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m syncing alerting node {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m node sync requested {"component": "node-backend", "cluster": "(all)", "capability": "alerting"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m synced node {"component": "node-backend", "id": "agent2", "time": "2023-08-15T01:41:01Z"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m alerting node config is up to date {"component": "health-cfg-sync"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting[39m closing cortex cluster status watcher... {"watcher": "cortex-cluster-status"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m shutting down cluster driver update handler
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting[39m exiting main sync loop
  2023-08-15T01:41:01Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.alerting[39m failed to receive cluster health status from grpc stream, retrying...
  2023-08-15T01:41:01Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway[39m shutting down plugins
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent1"}
  2023-08-15T01:41:01Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway[39m all plugins shut down
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:01Z [31mERROR[0m [36mplugin.alerting[39m failed to receive cluster event : rpc error: code = Unavailable desc = error reading from server: read unix @->/tmp/plugin308284646: use of closed network connection
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.alerting/pkg/agent.stream[39m stream disconnected with error
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error
  2023-08-15T01:41:01Z [31mERROR[0m [36mplugin.alerting[39m EOF
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error
  2023-08-15T01:41:01Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.alerting/pkg/alerting.stream[39m stream server exited with error
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.delegate[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:41:01Z [35mDEBUG[0m [32mgateway.sync[39m agent disconnected {"id": "agent2"}
  2023-08-15T01:41:01Z [34mINFO[0m [32mgateway.grpc[39m agent stream closing {"error": "context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.metrics/pkg/gateway.stream[39m stream server exited with error {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [32mgateway[39m http server exited with error {"error": "context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [32magent[39m disconnected from gateway {"error": "rpc error: code = Canceled desc = context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [32magent[39m shutting down gateway client {"error": "context canceled"}
  2023-08-15T01:41:01Z [33mWARN[0m [32mtest.env[39m gateway server exited with error {"error": "context canceled"}
  2023-08-15T01:41:01Z [31mERROR[0m [32mtest[39m agent "agent2" exited: context canceled
  2023-08-15T01:41:01Z [33mWARN[0m [36mplugin.metrics/pkg/agent.stream[39m stream disconnected with error
  2023-08-15T01:41:01Z [31mERROR[0m [32mtest[39m agent "agent1" exited: context canceled
  2023-08-15T01:41:01Z [33mWARN[0m [32mtest.env[39m management server exited with error {"error": "context canceled"}
[38;5;10m• [0.157 seconds][0m
[38;5;243m------------------------------[0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [0m[1mshould install the alerting cluster[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:160[0m
  2023-08-15T01:41:01Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml --syncer.listen.address=:43299 --syncer.alertmanager.address=http://127.0.0.1:39527 --syncer.gateway.join.address=:42179 syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:01Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "alertmanager-port": 39527, "opni-port": 43851}
  ts=2023-08-15T01:41:01.848Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:41:01.848Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:41:01.851Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=43159
  ts=2023-08-15T01:41:01.852Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  ts=2023-08-15T01:41:01.885Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:01.885Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:01.888Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:39527
  ts=2023-08-15T01:41:01.888Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:39527
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "port": 43299}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "address": "http://127.0.0.1:39527"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m updating known peers : [{http://127.0.0.1:39527 http://127.0.0.1:43869}]
[38;5;10m• [1.020 seconds][0m
[38;5;243m------------------------------[0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [0m[1mshould apply the configuration[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:176[0m
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml --syncer.listen.address=:34301 --syncer.alertmanager.address=http://127.0.0.1:35817 --syncer.gateway.join.address=:42179 syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "alertmanager-port": 35817, "opni-port": 45277}
  2023-08-15T01:41:02Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:42179
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity 347a9035-d7e3-4fd9-82da-706a094b325b
  ts=2023-08-15T01:41:02.863Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:41:02.863Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  ts=2023-08-15T01:41:02.866Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=35365
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "a2d53738-539c-49d0-9e03-5398bbd31505"}
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  ts=2023-08-15T01:41:02.869Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "461299ca-49e7-4b9f-9be4-4294f13cf095"}
  2023-08-15T01:41:02Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:02.883Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:02.884Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:02Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:02.904Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:02.905Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:02.907Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:35817
  ts=2023-08-15T01:41:02.907Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:35817
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "port": 34301}
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "address": "http://127.0.0.1:35817"}
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-test-cluster-driver[39m Syncer start : alerting-server --syncer.alertmanager.config.file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml --syncer.listen.address=:46791 --syncer.alertmanager.address=http://127.0.0.1:36617 --syncer.gateway.join.address=:42179 syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "alertmanager-port": 36617, "opni-port": 41133}
  ts=2023-08-15T01:41:03.853Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=2 elapsed=2.001124666s
  2023-08-15T01:41:03Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:42179
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity 718140ab-0c49-494d-907b-d6f92289873c
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "1b66a932-21d1-4ce6-a23a-a823c793ec18"}
  ts=2023-08-15T01:41:03.956Z caller=alertmanager_main.go:259 level=info msg="Starting Alertmanager" version="(version=, branch=, revision=64e8ad84fa6fe91fb5e3aa2828e2240b7169414e)"
  ts=2023-08-15T01:41:03.957Z caller=alertmanager_main.go:260 level=info build_context="(go=go1.21.0, platform=linux/amd64, user=, date=, tags=nomsgpack)"
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "eac5b487-db34-44da-8c98-ed6fea524cc5"}
  ts=2023-08-15T01:41:03.965Z caller=cluster.go:185 level=info component=cluster msg="setting advertise address explicitly" addr=172.31.7.66 port=41425
  ts=2023-08-15T01:41:03.968Z caller=cluster.go:681 level=info component=cluster msg="Waiting for gossip to settle..." interval=2s
  2023-08-15T01:41:03Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:03.972Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:03.972Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:03Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.004Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.005Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.007Z caller=tls_config.go:274 level=info msg="Listening on" address=[::]:36617
  ts=2023-08-15T01:41:04.007Z caller=tls_config.go:277 level=info msg="TLS is disabled." http2=false address=[::]:36617
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m Starting AlertManager Syncer {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "port": 46791}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-test-cluster-driver[39m AlertManager started {"config-file": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml", "address": "http://127.0.0.1:36617"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m updating known peers : [{http://127.0.0.1:39527 http://127.0.0.1:43869} {http://127.0.0.1:35817 http://127.0.0.1:43869} {http://127.0.0.1:36617 http://127.0.0.1:43869}]
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
[38;5;10m• [2.030 seconds][0m
[38;5;243m------------------------------[0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [0m[1mthe alerting plugin components should be running and healthy[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:204[0m
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [32mapi[39m => {"method": "GET", "path": "/plugin_alerting/ready", "to": "127.0.0.1:35153 (plugin_alerting)", "for": "127.0.0.1", "host": "localhost:37611", "scheme": "https"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:04Z [35mDEBUG[0m [32mapi[39m => {"method": "GET", "path": "/plugin_alerting/healthy", "to": "127.0.0.1:35153 (plugin_alerting)", "for": "127.0.0.1", "host": "localhost:37611", "scheme": "https"}
[38;5;10m• [0.036 seconds][0m
[38;5;243m------------------------------[0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [0m[1mshould be able to create some endpoints[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:239[0m
  [1mSTEP:[0m verifying they are externally persisted [38;5;243m@ 08/15/23 01:41:04.85[0m
  [1mSTEP:[0m verifying they are reachable [38;5;243m@ 08/15/23 01:41:04.857[0m
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sent manual sync request {"method": "sendManualSyncRequest", "sync-id": "de3890376c48dd11c94cefabc6a269ffaed3e7418bc3eef8bcc0b015d661aca1"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (de3890376c48dd11c94cefabc6a269ffaed3e7418bc3eef8bcc0b015d661aca1) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received request to trigger alerts  on condition id:"eCX4oAdVdZHpaC5g7h4xUX" {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received alert annotations : map[OpniHeader:Test notification OpniSummary:Admin has sent a test notification] {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (de3890376c48dd11c94cefabc6a269ffaed3e7418bc3eef8bcc0b015d661aca1) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.870Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=3 elapsed=2.000885063s
  ts=2023-08-15T01:41:04.870Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.871Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.871Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.871Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sent manual sync request {"method": "sendManualSyncRequest", "sync-id": "f15b556b3ab0d0701569f65cbf4f08f871a4b9ddf73916e3f54c6d65b276a387"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received request to trigger alerts  on condition id:"7kFfA7bgQ9ukcD3Zqo7h7Q" {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received alert annotations : map[OpniHeader:Test notification OpniSummary:Admin has sent a test notification] {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (f15b556b3ab0d0701569f65cbf4f08f871a4b9ddf73916e3f54c6d65b276a387) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (f15b556b3ab0d0701569f65cbf4f08f871a4b9ddf73916e3f54c6d65b276a387) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.884Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.884Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.885Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.885Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [2mcommands/alerting.go:72[22m syncer gateway join address:42179
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:90[22m starting alerting syncer server as identity 4ea3286b-3229-421f-9efb-e5a702a331a8
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sent manual sync request {"method": "sendManualSyncRequest", "sync-id": "2423c2d3586fb0857863f8e21bcf39c3c60b98341f8ba81189b64d3031b79c6d"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received request to trigger alerts  on condition id:"SGuVCs9FnNm3UaHr6Bm6Y" {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received alert annotations : map[OpniHeader:Test notification OpniSummary:Admin has sent a test notification] {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (2423c2d3586fb0857863f8e21bcf39c3c60b98341f8ba81189b64d3031b79c6d) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (2423c2d3586fb0857863f8e21bcf39c3c60b98341f8ba81189b64d3031b79c6d) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.898Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.899Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.900Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.899Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:108[22m acquired gateway alerting client
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:144[22m starting alerting syncer stream subscription
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "91dd5c2f-3786-4562-870a-0f052b40ecbd"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:150[22m starting new stream subscription
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:124[22m trying to acquire remote syncer stream
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:133[22m connected to remote syncer
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sent manual sync request {"method": "sendManualSyncRequest", "sync-id": "4775d46c83afd9b12874d7602b38590d5db61b43c982aab4018b64be7fbe4859"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received request to trigger alerts  on condition id:"QMH3opSfy9EGrSBnyp56X4" {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received alert annotations : map[OpniHeader:Test notification OpniSummary:Admin has sent a test notification] {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting[39m  remote syncer connected, performaing initial sync... {"method": "SyncConfig", "assignedId": "274ca105-9abb-4f72-a7e7-53dedf1980f4"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (4775d46c83afd9b12874d7602b38590d5db61b43c982aab4018b64be7fbe4859) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (4775d46c83afd9b12874d7602b38590d5db61b43c982aab4018b64be7fbe4859) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.909Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.909Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.909Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.909Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (127fe9181331fbe2847a95a2797367ef9dd375c862ac9b44cf9df5f5c023a3a6) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.924Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.925Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m sent manual sync request {"method": "sendManualSyncRequest", "sync-id": "127fe9181331fbe2847a95a2797367ef9dd375c862ac9b44cf9df5f5c023a3a6"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received request to trigger alerts  on condition id:"oc2ac5Wcs6uAzgERrTsdvc" {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting[39m Received alert annotations : map[OpniHeader:Test notification OpniSummary:Admin has sent a test notification] {"component": "notifications", "Handler": "TriggerAlerts"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (127fe9181331fbe2847a95a2797367ef9dd375c862ac9b44cf9df5f5c023a3a6) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (127fe9181331fbe2847a95a2797367ef9dd375c862ac9b44cf9df5f5c023a3a6) config message
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:04.933Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.934Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.933Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:04.934Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (127fe9181331fbe2847a95a2797367ef9dd375c862ac9b44cf9df5f5c023a3a6) config message
  2023-08-15T01:41:04Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:04Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:220[22m put config request received {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:05.631Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:05.631Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:05.631Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:05.631Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:05.632Z caller=coordinator.go:113 level=info component=configuration msg="Loading configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  ts=2023-08-15T01:41:05.632Z caller=coordinator.go:126 level=info component=configuration msg="Completed loading of configuration file" file=/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  2023-08-15T01:41:05Z [35mDEBUG[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:246[22m config reloaded {"config-path": "/tmp/opni-test-2132242568/alertmanager-config-5dc62f01-96b3-4301-9b89-d83632b4c5e7/alertmanager.yaml"}
  ts=2023-08-15T01:41:05.854Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=1 before=2 now=3 elapsed=4.002109339s
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m evaluation context is exiting, exiting evaluation loop {"component": "alarms", "onSystemConditionCreate": "34e6zCJWGxLSxNSP97cftd"}
  2023-08-15T01:41:05Z [34mINFO[0m [36mplugin.alerting[39m parent context is exiting, exiting evaluation loop {"component": "alarms", "onCapabilityStatusCreate": "stdRzQww4KPXDy5r3dVAh6"}
  ts=2023-08-15T01:41:05.969Z caller=cluster.go:706 level=info component=cluster msg="gossip not settled" polls=0 before=0 now=3 elapsed=2.000338425s
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:06Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:06Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:07Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:07Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:08Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:08Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:09Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:09Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:10Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (1/5) conditions {"component": "alarms"}
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 3/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:10Z [31mERROR[0m [36mplugin.alerting[39m context canceled
  nats: timeout {"action": "runSyncTasks"}
  2023-08-15T01:41:10Z [31mERROR[0m [36mplugin.alerting[39m failed to successfully run all alerting sync tasks : context canceled
  nats: timeout
  2023-08-15T01:41:10Z [31mERROR[0m [36mplugin.alerting[39m skipping alerting periodic sync due to error : %scontext canceled {"action": "runSyncTasks"}
  2023-08-15T01:41:10Z [31mERROR[0m [36mplugin.alerting[39m failed to successfully run all alerting sync tasks : context canceled
  2023-08-15T01:41:10Z [34mINFO[0m [36mplugin.alerting[39m exiting main sync loop
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:11Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:11Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:12Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:12Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  ts=2023-08-15T01:41:12.873Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.004204209s
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:13Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:13Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  ts=2023-08-15T01:41:13.856Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=12.00388903s
  ts=2023-08-15T01:41:13.857Z caller=notify.go:740 level=warn component=dispatcher receiver=opni.default.hook integration=webhook[0] msg="Notify attempt failed, will retry later" attempts=1 err="Post \"<redacted>\": dial tcp 127.0.0.1:3000: connect: connection refused"
  ts=2023-08-15T01:41:13.971Z caller=cluster.go:698 level=info component=cluster msg="gossip settled; proceeding" elapsed=10.00257536s
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:14Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:14Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:15Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:15Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:16Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:16Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:17Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:17Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:18Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:18Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:19Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:19Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:20Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:20Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:21Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:21Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:22Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:22Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:23Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:23Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:24Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:24Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:25Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:25Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:26Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:26Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:27Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:27Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:28Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:28Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:29Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:29Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:30Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:30Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:31Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:31Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:32Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:32Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:33Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:33Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m Running periodic sync for alerting {"action": "runSyncTasks"}
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m syncing 0 conditions {"component": "alarms"}
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m successfully synced (0/0) conditions {"component": "alarms"}
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m sync change detected, pushing sync request to remote syncers {"method": "doSync", "syncId": "e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150"}
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m finished running periodic sync for alerting, sucessfully ran 4/4 sync tasks {"action": "runSyncTasks"}
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:173[22m received sync (e0849115578d79a76d525e44b6d6fa06b3acc3370cd54602f84401f75da13150) config message
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting-syncer[39m [2msyncer/syncer_server.go:175[22m already up to date
  [38;5;9m[FAILED][0m in [It] - /home/ec2-user/opni/test/plugins/alerting/alerting_test.go:269 [38;5;243m@ 08/15/23 01:41:34.934[0m
  [38;5;9m[FAILED][0m in [AfterEach] - /home/ec2-user/opni/test/plugins/alerting/alerting_test.go:153 [38;5;243m@ 08/15/23 01:41:34.944[0m
[38;5;9m• [FAILED] [30.109 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;9m[1m[It] should be able to create some endpoints[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:239[0m

  [38;5;9m[FAILED] Timed out after 30.001s.
  Expected success, but got an error:
      <*errors.errorString | 0xc0054da220>: 
      server mock-integration-fAeNNrkhJqtd26oSstsDta did not receive any alerts
      {
          s: "server mock-integration-fAeNNrkhJqtd26oSstsDta did not receive any alerts",
      }[0m
  [38;5;9mIn [1m[It][0m[38;5;9m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:269[0m [38;5;243m@ 08/15/23 01:41:34.934[0m

  There were [1m[38;5;9madditional failures[0m detected.  To view them in detail run [1mginkgo -vv[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should create some default conditions when bootstrapping agents[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:277[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:277[0m [38;5;243m@ 08/15/23 01:41:34.945[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] shoud list conditions by given filters[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:335[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:335[0m [38;5;243m@ 08/15/23 01:41:34.946[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should be able to attach endpoints to conditions[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:401[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:401[0m [38;5;243m@ 08/15/23 01:41:34.947[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] agent disconnect alarms should fire when agents are disconnected [0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:505[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:505[0m [38;5;243m@ 08/15/23 01:41:34.948[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should be able to batch list status and filter by status[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:601[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:601[0m [38;5;243m@ 08/15/23 01:41:34.948[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should be able to push notifications to our notification endpoints[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:627[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:627[0m [38;5;243m@ 08/15/23 01:41:34.949[0m
[38;5;243m------------------------------[0m
[38;5;11mP [PENDING][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;11m[1mshould be able to list opni messages[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:651[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should return warnings when trying to edit/delete alert endpoints that are involved in conditions[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:671[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:671[0m [38;5;243m@ 08/15/23 01:41:34.95[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should have a functional timeline[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:706[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:706[0m [38;5;243m@ 08/15/23 01:41:34.951[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] the alertmanager proxy served by the Gateway HTTP port should be able to list the alarms[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:757[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:757[0m [38;5;243m@ 08/15/23 01:41:34.952[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should sync friendly cluster names to conditions[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:782[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:782[0m [38;5;243m@ 08/15/23 01:41:34.953[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should force update/delete alert endpoints involved in conditions[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:818[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:818[0m [38;5;243m@ 08/15/23 01:41:34.953[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should delete the downstream agents[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:881[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:881[0m [38;5;243m@ 08/15/23 01:41:34.954[0m
[38;5;243m------------------------------[0m
[38;5;14mS [SKIPPED] [0.000 seconds][0m
[0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;14m[1m[It] should uninstall the alerting cluster[0m [38;5;204m[integration][0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:891[0m

  [38;5;14m[SKIPPED] Spec skipped because an earlier spec in an ordered container failed[0m
  [38;5;14mIn [1m[It][0m[38;5;14m at: [1m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:891[0m [38;5;243m@ 08/15/23 01:41:34.955[0m
[38;5;243m------------------------------[0m
[0m[1m[DeferCleanup (Suite)] [0m
[38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_suite_test.go:51[0m
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m closing cortex cluster status watcher... {"watcher": "cortex-cluster-status"}
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m exiting main sync loop
  2023-08-15T01:41:34Z [34mINFO[0m [36mplugin.alerting[39m shutting down cluster driver update handler
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "461299ca-49e7-4b9f-9be4-4294f13cf095"}
  2023-08-15T01:41:34Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "a2d53738-539c-49d0-9e03-5398bbd31505"}
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "91dd5c2f-3786-4562-870a-0f052b40ecbd"}
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "1b66a932-21d1-4ce6-a23a-a823c793ec18"}
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "eac5b487-db34-44da-8c98-ed6fea524cc5"}
  2023-08-15T01:41:34Z [35mDEBUG[0m [36mplugin.alerting[39m exiting syncer loop, alerting plugin shutting down {"method": "SyncConfig", "assignedId": "274ca105-9abb-4f72-a7e7-53dedf1980f4"}
  2023-08-15T01:41:34Z [33mWARN[0m [36mplugin.alerting[39m failed to receive cluster health status from grpc stream, retrying...
  ts=2023-08-15T01:41:34.957Z caller=alertmanager_main.go:601 level=info msg="Received SIGTERM, exiting gracefully..."
  2023-08-15T01:41:34Z [31mERROR[0m [36mplugin.alerting[39m failed to receive cluster event : rpc error: code = Canceled desc = context canceled
  ts=2023-08-15T01:41:34.957Z caller=alertmanager_main.go:601 level=info msg="Received SIGTERM, exiting gracefully..."
  2023-08-15T01:41:34Z [34mINFO[0m [32mgateway[39m shutting down plugins
  2023-08-15T01:41:34Z [33mWARN[0m [32mtest.env[39m management server exited with error {"error": "context canceled"}
  2023-08-15T01:41:34Z [33mWARN[0m [32mgateway[39m http server exited with error {"error": "context canceled"}
  2023-08-15T01:41:34Z [33mWARN[0m [32mtest.env[39m gateway server exited with error {"error": "context canceled"}
  2023-08-15T01:41:34Z [34mINFO[0m [32mgateway[39m all plugins shut down
  2023-08-15T01:41:34Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:34Z [33mWARN[0m [32mjetstream[39m disconnected from jetstream
  2023-08-15T01:41:34Z [31mERROR[0m [36mplugin.alerting[39m EOF
[38;5;10m[DeferCleanup (Suite)] PASSED [0.024 seconds][0m
[38;5;243m------------------------------[0m
[0m[1m[DeferCleanup (Suite)] [0m
[38;5;243m/home/ec2-user/go/pkg/mod/github.com/golang/mock@v1.7.0-rc.1/gomock/controller.go:99[0m
[38;5;10m[DeferCleanup (Suite)] PASSED [0.000 seconds][0m
[38;5;243m------------------------------[0m

[38;5;9m[1mSummarizing 1 Failure:[0m
  [38;5;9m[FAIL][0m [0mAlerting Cluster Integration tests [38;5;243mwhen Installing the Alerting Cluster [38;5;9m[1m[It] should be able to create some endpoints[0m [38;5;204m[integration][0m
  [38;5;243m/home/ec2-user/opni/test/plugins/alerting/alerting_test.go:269[0m

[38;5;9m[1mRan 27 of 41 Specs in 99.430 seconds[0m
[38;5;9m[1mFAIL![0m -- [38;5;10m[1m26 Passed[0m | [38;5;9m[1m1 Failed[0m | [38;5;11m[1m1 Pending[0m | [38;5;14m[1m13 Skipped[0m
--- FAIL: TestAlerting (99.43s)
FAIL

Ginkgo ran 1 suite in 1m49.83826659s

Test Suite Failed
