# Jenkins X proposal 

## Summary:
Currently our CI all runs on Drone which works for a single repository but runs into issues working across multiple repositories and more advanced orchestration.  To resolve this we should set up [Jenkins X](https://jenkins-x.io/v3/about/what/)

## Use case: 
Pull Request - automatically set up a preview environment for manual exploratory testing
Nighly Builds - run automated e2e tests on build of master nightly
Potentially maintain a long running install of master for exploratory testing.  This would get deployed to after nightly builds.
Orchestrate releases - automate releasing of products across all repos (this would need to be a wrapper around the existing CI as Drone contains all the secrets required to push to DockerHub)

## Benefits: 
Jenkins X is built on [Tekton](https://tekton.dev) pipelines.  This is an extensible cloud native pipeline building tool, initially developed by Google.  It is more fully featured that Drone pipelines, and Jenkins X comes with some existing pipelines.

ChatOps on PRs to simplify interactions with CI.

## Implementation details: 
We would create and maintain a long lived k8s server for hosting the CI.  This would be where the pipelines get executed. We would need some more investigation about whether it's feasible to create other Kubernetes clusters on the fly - Jenkins X does work with Terraform so we could potentially have Terraform code to run against the Rancher instance.

We would maintain a separate git repo that holds all the GitOps code for running the CI server

Also we should investigate [vcluster](https://www.vcluster.com) to see if that would work in the Jenkins X cluster

## Level of Effort: 
Initial investigation of 1 week.  If this works out this would then be extended into the long lived project.

## Resources: 
Long lived EKS cluster.
